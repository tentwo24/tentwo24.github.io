<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>个人博客前台 | 拾贰</title><meta name="keywords" content="Vue2"><meta name="author" content="拾贰"><meta name="copyright" content="拾贰"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="个人博客前台"><meta name="application-name" content="个人博客前台"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="个人博客前台"><meta property="og:url" content="http://example.com/2024/10/29/Vue%E9%A1%B9%E7%9B%AE%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/index.html"><meta property="og:site_name" content="拾贰"><meta property="og:description" content="一、前端框架的由来 vue官网：https:&amp;#x2F;&amp;#x2F;cn.vuejs.org&amp;#x2F;  服务端渲染 1234sequenceDiagram浏览器-&amp;gt;&amp;gt;+服务器: http:&amp;#x2F;&amp;#x2F;duyi.com&amp;#x2F;newsNote right of 服务器: 组装页面(服务端渲染)服务器-&amp;gt;&amp;gt;-浏览器:"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://s2.loli.net/2023/09/01/NzaWb31teHk5UuX.jpg"><meta property="article:author" content="拾贰"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://s2.loli.net/2023/09/01/NzaWb31teHk5UuX.jpg"><meta name="description" content="一、前端框架的由来 vue官网：https:&amp;#x2F;&amp;#x2F;cn.vuejs.org&amp;#x2F;  服务端渲染 1234sequenceDiagram浏览器-&amp;gt;&amp;gt;+服务器: http:&amp;#x2F;&amp;#x2F;duyi.com&amp;#x2F;newsNote right of 服务器: 组装页面(服务端渲染)服务器-&amp;gt;&amp;gt;-浏览器:"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="http://example.com/2024/10/29/Vue%E9%A1%B9%E7%9B%AE%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2023/09/03/125766904/ee23df8517f3c3e3efc4145658269c06_5714860933110284659.png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":["🤖️ 前端开发爱好者","🔍 分享与热心帮助","🔨 设计开发一条龙","🏃 脚踏实地行动派","🧱 团队小组发动机"]},
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: 拾贰","link":"链接: ","source":"来源: 拾贰","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: '拾贰',
  title: '个人博客前台',
  postAI: '',
  pageFillDescription: '一、前端框架的由来, 二、第一个vue应用, 三、核心概念, 1.注入, 2.虚拟DOM树, 3.挂载, 4.完整流程, 四、组件, 1.组件开发, 创建组件, 注册组件, 全局注册, 局部注册, 应用组件, 2.组件树, 3.向组件传递数据, 4.工程结构, 五、搭建工程, 1.vue-cli, 2.SFC, 3.预编译, 六、计算属性, 七、组件事件, 1.pager组件, 属性, 事件, 2.知识点, 八、优化工程结构, 1.如何使用组件？, 2.如何测试组件效果？, 九、组件练习, 1.Avatar, 属性, 2.Icon, 属性, 3.Pager, 属性, 事件, 4.Empty, 属性, 5.ImageLoader, 属性, 事件, 示例, 6.Contact, 7.Menu, 8.SiteAside, 十、插槽, 1.插槽的简单用法, 2.具名插槽, 十一、路由, 1.路由插件, 2.基本使用, 3.路由模式, 4.导航, 激活状态, 5.命名路由, 十二、弹出消息▲, 1.使用css module, 2.得到组件渲染的Dom, 3.扩展vue实例, 4.ref, 5、全局通用showMessage, 十三、获取远程数据, 1.远程获取数据的意义, 2.开发环境有跨域问题, 3.生产环境没有跨域问题, 4.解决开发环境的跨域问题, 5.为什么要Mock数据, 6.请求拦截, 十四、组件的生命周期, 1.组件生命周期, 2.常见应用, 加载远程数据, 直接操作DOM, 启动和清除计时器, 十五、自定义指令, 1.定义指令, 全局定义, 局部定义, 2.指令配置对象, bingding 对象, 3.配置简化, 十六、组件混入, 十七、组件递归, 十八、文章列表页逻辑, 1.路由跳转逻辑, 2.组件逻辑, BlogList, BlogCategory, 3.知识, 动态路由, 动态路由的导航, 编程式导航, watch, 十九、文章详情页, 1.文章数据逻辑, 2.组件逻辑, BlogDetail, BlogTOC, BlogComment, 二十、$listeners和v-model, 事件修饰符, $listeners, v-model, v-on, 二十一、事件总线, 二十二、图片懒加载, 二十三、数据共享之Vuex, 1.创建仓库, 2.数据的变更, 3.异步处理, 二十四、简易登录, 1.用户模块逻辑示意图, 2.参考资料, vue, vuex, router, 3.Demo, 4.路由鉴权, 二十五、打包结果分析, 1.分析打包结果, 2.优化公共库打包体积, 使用CDN, 启用现代模式, 3.优化项目包体积, 页面分包, 4.优化首屏响应, 二十六、异步组件, 1.异步组件, 2.应用一前端框架的由来官网服务端渲染浏览器服务器服务器组装页面服务端渲染服务器浏览器完整页面前后端分离浏览器服务器服务器浏览器无内容的浏览器浏览器服务器服务器浏览器各种业务数据浏览器运行创建元素渲染页面浏览器单页应用浏览器服务器服务器浏览器无内容的浏览器浏览器运行创建元素渲染页面浏览器服务器服务器浏览器各种业务数据浏览器跳转页面浏览器服务器服务器浏览器各种业务数据浏览器重新构建页面元素浏览器框架浏览器服务器服务器浏览器无内容的浏览器浏览器运行包含的使用框架渲染页面浏览器服务器服务器浏览器各种业务数据浏览器使用跳转页面浏览器二第一个应用模板真实的标题商品管理系统商品名称商品库存无货删除总库存引入创建实例可以获取和操作对象实例和里数据一样选中的元素将会被管控页面中要使用的数据数据变化三核心概念注入会将以下配置注入到实例和界面相关的数据通过已有数据计算得来的数据将来详细讲解方法注入后就会有数据响应式模板中可以使用实例中的成员虚拟树因为重排回流等种种原因直接操作真实的会引发严重的效率问题使用虚拟的方式来描述要渲染的内容是一个普通的对象用于描述界面上应该有什么比如第一个应用上面的对象描述了有一个标签名为的节点它有一个子节点该子节点是一个文本内容为第一个应用模板并不是真实的它会被编译为虚拟第一个应用作者上面的模板会被编译为类似下面结构的虚拟第一个应用作者袁虚拟树会最终生成为真实的树当数据变化后将引发重新渲染会比较新旧两棵找出差异然后仅把差异部分应用到真实中可见在中要得到最终的界面必须要生成一个通过以下逻辑生成如果不写方法会将模板里面的内容编译成方法模板就是如果模板也没有就会将配置的内容当成模板注意虚拟节点树必须是单根的也就是只能有一个根节点挂载将生成的真实树放置到某个元素位置称之为挂载挂载的方式通过选择器进行配置通过实例选择器进行配置普通挂载如果不写方法会将模板里面的内容编译成方法如果没有配置模板就会将配置的内容当成模板挂载挂载到中完整流程四组件组件的出现是为了实现以下两个目标降低整体复杂度提升代码的可读性和可维护性提升局部代码的可复用性绝大部分情况下一个组件就是页面中某个区域组件包含该区域的功能代码内容模板代码样式代码要在组件中包含样式需要构建工具的支撑组件开发创建组件组件是根据一个普通的配置对象创建的所以要开发一个组件只需要写一个配置对象即可该配置对象和实例的配置是几乎一样的组件配置对象值得注意的是组件配置对象和实例有以下几点差异无必须是一个函数该函数返回的对象作为数据由于没有配置组件的虚拟树必须定义在或中注册组件注册组件分为两种方式一种是全局注册一种是局部注册全局注册一旦全局注册了一个组件整个应用中任何地方都可以使用该组件全局注册的方式是参数组件名称将来在模板中使用组件时会使用该名称参数组件配置对象该代码运行后即可在模板中使用组件在模板中可以使用组件了或例子模板真实的引入当前点击了次全局注册了一个组件组件中必须是个函数的原因就在这每创建一个组件实例都会生成一个如果用对象的话会共用同一个但在一些工程化的大型项目中很多组件都不需要全局使用比如一个登录组件只有在登录的相关页面中使用如果全局注册将导致构建工具无法优化打包因此除非组件特别通用否则不建议使用全局注册局部注册局部注册就是哪里要用到组件就在哪里注册局部注册的方式是在要使用组件的组件或实例中加入一个配置这是另一个要使用的组件属性名为组件名称模板中将使用该名称属性值为组件配置对象该组件的其他内容应用组件在模板中使用组件特别简单把组件名当作元素名使用即可但要注意以下几点组件必须有结束组件可以自结束也可以用结束标记结束但必须要有结束下面的组件使用是错误的组件的命名无论你使用哪种方式注册组件组件的命名需要遵循规范组件可以使用短横线命名法也可以使用大驼峰命名法下面两种命名均是可以的方式方式实际上使用小驼峰命名法也是可以识别的只不过不符合官方要求的规范使用方式命名还有一个额外的好处即可以在模板中使用两种组件名模板中可用因此在使用组件时为了方便往往使用以下代码组件配置速写属性组件树一个组件创建好后往往会在各种地方使用它它可能多次出现在实例中也可能出现在其他组件中于是就形成了一个组件树向组件传递数据大部分组件要完成自身的功能都需要一些额外的信息比如一个头像组件需要告诉它头像的地址这就需要在使用组件时向组件传递数据传递数据的方式有很多种最常见的一种是使用组件属性首先在组件中申明可以接收哪些属性和实例一样使用组件时也会创建组件的实例而组件的属性会被提取到组件实例中因此可以在模板中使用在使用组件时向其传递属性注意在组件中属性是只读的绝不可以更改这叫做单向数据流工程结构入口模块文件创建实例渲染组件的根组件组件当前点击了次五搭建工程是一个脚手架工具用于搭建工程它内部使用了并预置了诸多插件和加载器以达到开箱即用的效果除了基本的插件和加载器外还预置了单文件组件即一个文件就包含了一个组件所需的全部代码组件模板代码组件配置组件样式例子头像组件属性必须是一个字符串属性必传带有作用域的样式的原理是给每个组件都加一个独一无二的属性然后再利用属性选择器添加样式当然同一个组件的属性是相同的预编译当进行打包时会直接把组件中的模板转换为函数这叫做模板预编译预编译即先打包再运行源代码打包运行将写在里面的话就是先运行再编译这样做的好处在于运行时就不再需要编译模板了提高了运行效率打包结果中不再需要的编译代码减少了打包体积六计算属性例子引出组件姓名全名如果把换成就会连续调用多次全名全名全名全名姬成修改姓名为姬成袁进时间不会变化只会有一个固定值正在设置全名面试题计算属性和方法有什么区别计算属性本质上是包含和的方法当获取计算属性时实际上是在调用计算属性的方法会收集计算属性的依赖并缓存计算属性的返回结果只有当依赖变化后才会重新进行计算方法没有缓存每次调用方法都会导致重新执行计算属性的和参数固定没有参数只有一个参数而方法的参数不限由于有以上的这些区别因此计算属性通常是根据已有数据得到其他数据并在得到数据的过程中不建议使用异步当前时间随机数等副作用操作实际上他们最重要的区别是含义上的区别计算属性含义上也是一个数据可以读取也可以赋值方法含义上是一个操作用于处理一些事情完整的计算属性书写只要依赖不变就不会被再次调用只会调用一次因为不是注入的数据没有响应式只包含的计算属性简写补充字体图标组件图标类样式作用域样式对子组件根组件元素的影响为了完成某种特定样式而不影响原来子组件的样式我们可以在父组件中对子组件的样式进行修改我们在父组件中选择同时也会选中子组件的会给子组件添加父组件的属性类名七组件事件组件属性属性名含义类型必填默认值当前页码否总数据量否页容量否可见页码数否事件事件名含义事件参数参数类型页码变化新的页码分页器只有总页数大于时才显示是事件参数是自定义参数总页数得到显示的最小数字抛出一个事件知识点全局样式引入全局样式一般网站为保持美观性所用颜色应该比较少为了方便使用和以后统一改变我们可以使用颜色变量危险错误主色调链接大部分文字深色文字少部分文字浅色文字警告成功灰色深色样式文件中引入需要加微软雅黑补充在中引入使用指在中引入使用和面试题和有什么区别能够控制是否生成也就间接控制了是否生成对应的当为时会生成对应的并生成对应的元素当其为时不会生成对应的自然不会生成任何的元素始终会生成也就间接导致了始终生成它只是控制的属性当为时不做任何处理当其为时生成的的属性为使用可以有效的减少树的节点和渲染量但也会导致树的不稳定而使用可以保持树的稳定但不能减少树的节点和渲染量因此在实际开发中显示状态变化频繁的情况下应该使用以保持树的稳定显示状态变化较少时应该使用以减少树的节点和渲染量组件事件抛出事件子组件在某个时候发生了一件事但自身无法处理于是通过事件的方式通知父组件处理事件参数子组件抛出事件时传递给父组件的数据注册事件父组件申明当子组件发生某件事的时候自身将做出一些处理八优化工程结构如何使用组件编写组件说明文档如何测试组件效果在这里面编写测试组件然后根据下面文档使用九组件练习属性属性名含义类型必填默认值头像图片路径是无头像尺寸宽高相等否图标组件使用的图标源来自于阿里巴巴矢量库属性属性名含义类型必填默认值图标类型是无有效的图标类型属性属性名含义类型必填默认值当前页码否总数据量否页容量否可见页码数否事件事件名含义事件参数参数类型页码变化新的页码该组件需要在外层容器中横向垂直居中属性属性名含义类型必填默认值显示的文字否无数据该组件可以实现一个渐进式图片属性属性名含义类型必填默认值原始图片的路径是无原始图片加载完成前的占位图片是无原始图片加载完成后切换到原始图经过的毫秒数否事件事件名含义事件参数参数类型原始图片加载完成后触发无无示例该组件需要横向撑满容器背景色透明如何实现点击弹出对话设置超链接为要对话的号如何实现点击弹出发送邮件设置超链接为邮件地址该组件需要横向撑满容器背景色透明每个菜单的信息如下首页链接地址选中条件路径等于文章链接地址选中条件路径以开头关于我链接地址选中条件路径等于项目效果链接地址选中条件路径等于留言板链接地址选中条件路径等于网站侧边栏宽度和高度撑满外层容器十插槽在某些组件的模板中有一部分区域需要父组件来指定组件一个弹窗消息这里是消息内容可以是一个文本也可能是一段具体是什么不知道需要父组件指定确定关闭插槽的简单用法此时就需要使用插槽来定制组件的功能组件一个弹窗消息是的内置组件确定关闭父组件最终的结果确定关闭具名插槽如果某个组件中需要父元素传递多个区域的内容也就意味着需要提供多个插槽为了避免冲突就需要给不同的插槽赋予不同的名字组件我们希望把页头放这里提供插槽名为我们希望把主要内容放这里提供插槽名为我们希望把页脚放这里提供插槽名为父组件十一路由官网如何根据地址中的路径选择不同的组件把选择的组件放到哪个位置如何无刷新的切换组件路由插件为了保证和课程一致请安装版本路由插件的使用插件在中安装插件路由配置基本使用路由配置路由规则当匹配到路径时渲染组件当匹配到路径时渲染组件公共区域页面区域匹配到的组件会渲染到这里路由模式路由模式决定了路由从哪里获取访问路径路由如何改变访问路径提供了三种路由模式默认值路由从浏览器地址栏中的部分获取路径改变路径也是改变的部分该模式兼容性最好路由从浏览器地址栏的中获取路径改变路径使用的的该模式可以让地址栏最友好但是需要浏览器支持的模式就是用了该先阻止标签的默认行为然后用该改变路径路由从内存中获取路径改变路径也只是改动内存中的值这种模式通常应用到非浏览器环境中内存内存内存导航提供了全局的组件它的渲染结果是一个元素文章生成文章生成为了避免刷新页面实际上为它添加了点击事件并阻止了默认行为在事件内部使用更改路径文章激活状态默认情况下会用当前路径匹配导航路径如果当前路径是以导航路径开头则算作匹配会为导航的元素添加类名如果当前路径完全等于导航路径则算作精确匹配会为导航的元素添加类名例如当前访问的路径是则导航路径类名无无可以为组件添加属性将匹配规则改为必须要精确匹配才能添加匹配类名例如当前访问的路径是则导航路径类名无无无例如当前访问的路径是则导航路径类名无无无另外可以通过属性更改匹配的类名通过更改精确匹配的类名命名路由使用命名路由可以解除系统与路径之间的耦合防止如果改某个路由的路径要多处修改路由配置路由规则当匹配到路径时渲染组件当匹配到路径时渲染组件向属性传递路由信息对象会根据你传递的信息以及路由配置生成对应的路径十二弹出消息使用在中想使用需要将样式文件命名为为文件名为样式文件后缀名可以是得到组件渲染的获取某个组件渲染的根元素会打印出来一个实例对象打印真实扩展实例查看所有引用获取持有的所有引用元素原生的组件实例通过可以直接操作元素甚至可能直接改动子组件这些都不符合的设计理念除非迫不得已否则不要使用全局通用弹出消息消息内容消息类型多久后消失容器消息会显示到该容器的正中如果不传则显示到页面正中创建消息元素获取图标元素设置样式类型样式名将加入到容器中容器的是否改动过因为浏览器渲染是异步的要等代码执行完才会渲染那时候透明度和都已经改变过了不会有动画效果所以需要强行渲染读取导致回归到正常位置等一段时间消失运行回调函数补充方便好用的导出方式等同于十三获取远程数据本节课内容和没有任何关系远程获取数据的意义开发环境有跨域问题浏览器前端开发服务器前端开发服务器浏览器页面浏览器后端测试服务器跨域后端测试服务器浏览器数据浏览器浏览器阻止数据移交生产环境没有跨域问题浏览器服务器服务器浏览器页面浏览器服务器服务器浏览器数据浏览器静态资源服务器静态资源服务器浏览器页面浏览器数据服务器跨域数据服务器浏览器允许数据解决开发环境的跨域问题浏览器前端开发服务器前端开发服务器浏览器页面浏览器前端开发服务器前端开发服务器后端测试服务器代理请求后端测试服务器前端开发服务器数据前端开发服务器浏览器数据为什么要数据浏览器前端开发服务器前端开发服务器浏览器页面浏览器前端开发服务器前端开发服务器后端测试服务器代理请求后端测试服务器前端开发服务器后端正在开发中前端开发服务器浏览器浏览器前端开发服务器定义拦截规则浏览器前端开发服务器前端开发服务器浏览器页面浏览器浏览器模拟的数据请求拦截创建一个的实例请求拦截器处理错误信息十四组件的生命周期组件生命周期实例对象元素修改之前的元素最新数据因为数据更新后才会重新渲染修改之后的元素最新数据常见应用不要死记硬背要根据具体情况灵活处理加载远程数据直接操作启动和清除计时器十五自定义指令定义指令全局定义指令名称为指令配置指令名称为指令配置之后所有的组件均可以使用和指令某个组件代码表达式表达式表达式局部定义局部定义是指在某个组件中定义指令和局部注册组件类似定义的指令仅在该组件中有效某个组件代码表达式表达式表达式定义指令指令名称指令配置指令名称指令配置和局部注册组件一样为了让指令更加通用通常我们会把指令的配置提取到其他模块某个组件代码表达式表达式表达式导入当前组件需要用到的指令配置对象定义指令指令配置对象没有配置的指令就像没有配置的组件一样毫无意义支持在指令中配置一些钩子函数在适当的时机会调用这些钩子函数并传入适当的参数以便开发者完成自己想做的事情常用的钩子函数指令配置对象只调用一次指令第一次绑定到元素时调用在这里可以进行一次性的初始化设置被绑定元素插入父节点时调用所在组件的更新时调用查看更多的钩子函数每个钩子函数在调用时都会向其传递一些参数其中最重要的是前两个参数指令配置对象是被绑定元素对应的真实是一个对象描述了指令中提供的信息对象查看更多对象的属性配置简化比较多的时候在配置自定义指令时我们都会配置两个钩子函数这样在元素绑定和更新时都能运行到钩子函数如果这两个钩子函数实现的功能相同可以直接把指令配置简化为一个单独的函数该函数会被同时设置到和中利用上述知识可满足大部分自定义指令的需求更多的自定义指令用法见官网十六组件混入有的时候许多组件有着类似的功能这些功能代码分散在组件不同的配置中于是我们可以把这些配置代码抽离出来利用混入融合到组件中具体的做法非常简单抽离的公共代码使用将会得到之所以是数组是因为可以混入多个配置代码混入并不复杂更多细节参见官网十七组件递归显示当前组件数组和对象等要写成函数返回值十八文章列表页逻辑路由跳转逻辑组件逻辑知识动态路由我们希望下面的地址都能够匹配到组件显示全部文章显示分类为的文章显示分类为的文章第一种情况很简单只需要将一个固定的地址匹配到组件即可但后面的情况则不同匹配到组件的地址中有一部分是动态变化的则需要使用一种特殊的表达方式在地址中使用来表达这一部分的内容是变化的在中将变化的这一部分称之为可以在组件中通过来获取访问访问动态路由的导航编程式导航除了使用超链接导航外还允许在代码中跳转页面跳转地址普通跳转命名路由跳转回退类似于利用配置可以直接观察某个数据的变化变化时可以做一些处理其他配置观察的变化变化后会调用该函数新的值等同旧的值完整写法是否监听该数据内部属性的变化默认是否立即执行一次默认观察的变化变化后会调用该函数新的值等同旧的值完整写法是否监听该数据内部属性的变化默认是否立即执行一次默认十九文章详情页文章数据逻辑组件逻辑该组件没有任何难度根据属性文章对象显示出文章信息即可由于文章的内容属于原始因此需要使用指令来设置另外文章的内容是不带样式的因此需要选择一款的样式见附件对于文章中脚本部分的样式可以使用第三方库中提供的样式无难度不解释下节课讲解二十和事件修饰符针对节点的原生事件支持多种修饰符以简化代码详见事件修饰符按键修饰符系统修饰符是的一个实例属性它用于获取父组件传过来的所有事件函数父组件子组件和通信的异同相同点均可实现子组件向父组件传递消息差异点更加符合单向数据流子组件仅发出通知由父组件监听做出改变而则是在子组件中直接使用了父组件的方法调试工具可以监听到子组件的事件但无法监听到中的方法调用想想为什么由于中可以获得传递过来的方法因此调用方法可以得到其返回值但仅仅是向父组件发出通知无法知晓父组件处理的结果对于上述中的第三点可以在中传递回调函数来解决父组件得到子组件事件中的数据一段时间后调用子组件传递的回调函数子组件为父组件处理完成后得到的数据指令实质是一个语法糖它是属性和事件的结合体等同于选择框如果则选中详见表单输入绑定表单输入绑定等同于等同于组件封装如果嵌套过多导致方法传递过多时可以通过和来实现高级用法将方法按照链路传递最后在进行处理我们可以在中写二十一事件总线该通信方式主要是为了处理跨层级通信不一定非要是父子通信事件总线四个要点提供监听某事件的接口提供取消监听的接口触发事件的接口可传递数据触发事件后会自动通知监听者手写事件总线中的事件总线二十二图片懒加载通过自定义指令的方式实现图片懒加载可以重点看一下先暂时使用着默认图片处理图片该图片是否在视口范围内视口高度在视口范围内当真实图片加载完成之后处理图片后删掉希望调用该函数就可以设置那些合适的图片处理该图片立即处理它二十三数据共享之在中遇到共享数据会带来下面的多个问题如何保证数据的唯一性如果数据不唯一则会浪费大量的内存资源降低运行效率如果数据不唯一就可能出现不统一的数据难以维护某个组件改动数据后如何让其他用到该数据的组件知道数据变化了事件总线貌似可以解决该问题但需要在组件中手动的维护监听极其不方便而且事件总线的目的在于通知而不是共享数据一种比较容易想到的方案就是把所有的共享数据全部提升到根组件然后通过属性不断下发当某个组件需要修改数据时又不断向上抛出事件直到根组件完成对数据的修改这种方案的缺陷也非常明显需要编写大量的代码层层下发数据很多组件被迫拥有了自己根本不需要的数据需要编写大量的代码层层上抛事件很多组件被迫注册了自己根本处理不了的事件基于上面的问题我们可以简单的设置一个独立的数据仓库组件需要什么共享数据可以自由的从仓库中获取需要什么拿什么组件可以自由的改变仓库中的数据仓库的数据变化后会自动通知用到对应数据的组件更新要实现这一切可以选择最好只用于大型项目创建仓库先安装为了保证和课程一致请安装版本安装后可以通过下面的代码创建一个数据仓库在大部分情况下一个工程仅需创建一个数据仓库应用插件仓库的配置仓库的初始状态数据仓库创建好后你可以使用来访问仓库中的数据如果希望在中方便的使用仓库数据需要将作为插件安装安装插件仓库的配置仓库的初始状态数据向中注入仓库之后在组件中可以通过实例的属性访问到仓库会自动将配置的状态数据设置为响应式数据当数据变化时依赖该数据的组件会自动渲染数据的变更尽管可以利用数据响应式的特点直接变更数据但这样的做法在大型项目中会遇到问题如果有一天你发现某个共享数据是错误的而有一百多个组件都有可能变更过这块数据你该如何知道是哪一步数据变更出现了问题为了能够更好的跟踪数据的变化强烈建议使用来更改数据仓库的配置仓库的初始状态数据每个是一个方法它描述了数据在某种场景下的变化描述了数据在增加时应该发生的变化参数为当前的仓库数据求次幂该需要一个额外的参数来提供指数我们把让数据产生变化时的附加信息称之为负荷负载可以是任何类型数字字符串对象均可在该中我们约定为一个数字表示指数当我们有了后就不应该直接去改动仓库的数据了而是通过方法提交一个具体做法是的名字现在我们可以通过观测到数据的变化了特别注意中不得出现异步操作不然会记录不到在实际开发的规范中甚至要求不得有副作用操作副作用操作包括异步更改或读取外部环境的信息例如等提交是数据改变的唯一原因异步处理如果在中要进行异步操作需要使用然后在中提交提交类似于的对象本次异步操作的额外信息使用中的方法时应该使用二十四简易登录用户模块逻辑示意图路由总体示意图鉴权守卫逻辑示意图参考资料配置导航守卫开启严格模式后只允许通过改变状态开启命名空间命名空间的使用路由鉴权每当导航切换时包含刷新页面的第一次该函数会运行之前的路由对象即将进入的路由对象确认导航的一个函数调用该函数无参就会直接进入调用该函数传入参数根据传入参数进入新的导航需要鉴权进入鉴权流程加载中无法确定是否已经登录登录过了未登录该页面需要登录你还没有登录请先登录二十五打包结果分析分析打包结果由于是利用进行打包我们仅需加入一个插件即可分析打包结果为了避免在开发环境中启动我们仅需使用以下代码即可通过选项可对进行额外的配置该配置最终会和的默认配置进行合并补充分环境进行打包本身在处理配置文件时是基于模块规范来进行的它期望配置文件按照的方式来组织代码通过来导出一个包含各种配置选项的对象不支持通过选项可对进行额外的配置该配置最终会和的默认配置进行合并优化公共库打包体积使用全称为称之为内容分发网络它的基本原理是架设多台服务器这些服务器定期从源站拿取资源保存本地到让不同地域的用户能够通过访问最近的服务器获得资源我们可以把项目中的所有静态资源打包完成的都放到上收费也可以利用现成免费的获取公共库的资源首先我们需要告诉不要对公共库进行打包然后在页面中手动加入链接这里使用只有打包后需要这样引入开发环境不需要可以使用模板代码来处理对于和使用这种传统的方式引入的话会自动成为的插件因此需要去掉我们可以使用下面的代码来进行兼容没有使用传统的方式引入没有使用传统的方式引入启用现代模式为了兼容各种浏览器在内部使用了对代码进行降级你可以通过配置来设置需要兼容的目标浏览器这是一种比较偷懒的办法因为对于那些使用现代浏览器的用户它们也被迫使用了降级之后的代码而降低的代码中包含了大量的从而提升了包的体积因此我们希望提供两种打包结果降级后的包大提供给旧浏览器用户使用未降级的包小提供给现代浏览器用户使用除了应用进行多次打包外还可以利用给我们提供的命令针对现代浏览器和旧浏览器提供两个打包结果优化项目包体积这里的项目包是指目录中的打包结果页面分包默认情况下会利用将目录中的所有代码打包成一个这样就导致访问一个页面时需要加载所有页面的代码我们可以利用对动态的支持从而达到把不同页面的代码打包到不同文件中优化首屏响应首页白屏受很多因素的影响页面需要通过构建因此在下载到本地之前页面上什么也没有一个非常简单有效的办法即在页面中先渲染一个小的加载中效果等到下载到本地并运行后即会自动替换补充静态资源纯静态资源原封不动的到输出目录会参与打包二十六异步组件异步组件在代码层面组件本质上是一个配置对象但有的时候要得到某个组件配置对象需要一个异步的加载过程比如需要使用获得某个数据之后才能加载该组件为了合理的分包组件配置对象需要通过动态加载如果一个组件需要通过异步的方式得到组件配置对象该组件可以把它做成一个异步组件异步组件本质上是一个函数该函数调用后返回一个成功的结果是一个组件配置对象可看成你可以把该函数当做一个组件使用异步组件会调用该函数并等待完成完成之前该组件位置什么也不渲染异步组件的函数不仅可以返回一个还支持返回一个对象详见返回对象格式的异步组件应用异步组件通常应用在路由懒加载中以达到更好的分包为了提高用户体验可以在组件配置对象加载完成之前给用户显示一些提示信息组件开始加载组件加载完毕推荐使用展现一个进度条',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-11-18 14:02:12',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://s2.loli.net/2023/09/01/NzaWb31teHk5UuX.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">拾贰</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://s2.loli.net/2023/09/01/q6Stn5jbXVzxHmC.png" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://s2.loli.net/2023/09/01/q6Stn5jbXVzxHmC.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://s2.loli.net/2023/09/01/Qa1oSxc3nlEeGOt.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://s2.loli.net/2023/09/01/Qa1oSxc3nlEeGOt.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/HTML-CSS/" style="font-size: 1.05rem;">HTML+CSS<sup>4</sup></a><a href="/tags/JavaScript/" style="font-size: 1.05rem;">JavaScript<sup>4</sup></a><a href="/tags/Uniapp/" style="font-size: 1.05rem;">Uniapp<sup>2</sup></a><a href="/tags/Vue/" style="font-size: 1.05rem;">Vue<sup>2</sup></a><a href="/tags/Vue2/" style="font-size: 1.05rem;">Vue2<sup>2</sup></a><a href="/tags/Webpack/" style="font-size: 1.05rem;">Webpack<sup>2</sup></a><a href="/tags/git/" style="font-size: 1.05rem;">git<sup>1</sup></a><a href="/tags/%E5%B7%A5%E5%85%B7%E5%BA%93/" style="font-size: 1.05rem;">工具库<sup>1</sup></a><a href="/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96/" style="font-size: 1.05rem;">工程化<sup>1</sup></a><a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 1.05rem;">网络<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/11/"><span class="card-archive-list-date">十一月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/10/"><span class="card-archive-list-date">十月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/09/"><span class="card-archive-list-date">九月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/08/"><span class="card-archive-list-date">八月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/07/"><span class="card-archive-list-date">七月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/06/"><span class="card-archive-list-date">六月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%B8%A1%E4%B8%80%E5%A4%A7%E5%B8%88%E8%AF%BE%E4%B9%8B%E6%8A%80%E6%9C%AF%E6%8F%90%E5%8D%87/" itemprop="url">渡一大师课之技术提升</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/Vue2/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>Vue2</span></a></span></div></div><h1 class="post-title" itemprop="name headline">个人博客前台</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2024-10-29T03:19:35.564Z" title="发表于 2024-10-29 11:19:35">2024-10-29</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2024-11-18T06:02:12.627Z" title="更新于 2024-11-18 14:02:12">2024-11-18</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为新乡"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>新乡</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src=""></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://example.com/2024/10/29/Vue%E9%A1%B9%E7%9B%AE%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/"><header><a class="post-meta-categories" href="/categories/%E6%B8%A1%E4%B8%80%E5%A4%A7%E5%B8%88%E8%AF%BE%E4%B9%8B%E6%8A%80%E6%9C%AF%E6%8F%90%E5%8D%87/" itemprop="url">渡一大师课之技术提升</a><a href="/tags/Vue2/" tabindex="-1" itemprop="url">Vue2</a><h1 id="CrawlerTitle" itemprop="name headline">个人博客前台</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">拾贰</span><time itemprop="dateCreated datePublished" datetime="2024-10-29T03:19:35.564Z" title="发表于 2024-10-29 11:19:35">2024-10-29</time><time itemprop="dateCreated datePublished" datetime="2024-11-18T06:02:12.627Z" title="更新于 2024-11-18 14:02:12">2024-11-18</time></header><h1 id="一、前端框架的由来"><a href="#一、前端框架的由来" class="headerlink" title="一、前端框架的由来"></a>一、前端框架的由来</h1><blockquote>
<p>vue官网：<a target="_blank" rel="noopener" href="https://cn.vuejs.org/">https://cn.vuejs.org/</a></p>
</blockquote>
<p><strong>服务端渲染</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">浏览器-&gt;&gt;+服务器: http://duyi.com/news</span><br><span class="line">Note right of 服务器: 组装页面(服务端渲染)</span><br><span class="line">服务器-&gt;&gt;-浏览器: 完整页面</span><br></pre></td></tr></table></figure>

<hr>
<p><strong>前后端分离</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">浏览器-&gt;&gt;服务器: http://duyi.com/news</span><br><span class="line">服务器-&gt;&gt;浏览器: 无内容的html</span><br><span class="line">activate 浏览器</span><br><span class="line">浏览器--&gt;&gt;服务器: ajax</span><br><span class="line">服务器--&gt;&gt;浏览器: 各种业务数据</span><br><span class="line">Note left of 浏览器: 运行js，创建元素，渲染页面</span><br><span class="line">deactivate 浏览器</span><br></pre></td></tr></table></figure>

<hr>
<p><strong>单页应用</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">浏览器-&gt;&gt;服务器: http://duyi.com/news</span><br><span class="line">服务器-&gt;&gt;浏览器: 无内容的html</span><br><span class="line">activate 浏览器</span><br><span class="line">Note left of 浏览器: 运行js，创建元素，渲染页面</span><br><span class="line">浏览器--&gt;&gt;服务器: ajax</span><br><span class="line">服务器--&gt;&gt;浏览器: 各种业务数据</span><br><span class="line">Note left of 浏览器: 跳转页面</span><br><span class="line">浏览器--&gt;&gt;服务器: ajax</span><br><span class="line">服务器--&gt;&gt;浏览器: 各种业务数据</span><br><span class="line">Note left of 浏览器: JS重新构建页面元素</span><br><span class="line">deactivate 浏览器</span><br></pre></td></tr></table></figure>

<hr>
<p><strong>vue框架</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">浏览器-&gt;&gt;服务器: http://duyi.com/news</span><br><span class="line">服务器-&gt;&gt;浏览器: 无内容的html</span><br><span class="line">activate 浏览器</span><br><span class="line">Note left of 浏览器: 运行包含vue的js，使用框架渲染页面</span><br><span class="line">浏览器--&gt;&gt;服务器: ajax</span><br><span class="line">服务器--&gt;&gt;浏览器: 各种业务数据</span><br><span class="line">Note left of 浏览器: 使用vue-router跳转页面</span><br><span class="line">deactivate 浏览器</span><br></pre></td></tr></table></figure>

<h1 id="二、第一个vue应用"><a href="#二、第一个vue应用" class="headerlink" title="二、第一个vue应用"></a>二、第一个vue应用</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 模板 -&gt; vue -&gt; 真实的dom --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>标题：商品管理系统<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, i) in products&quot;</span>&gt;</span></span><br><span class="line">          商品名称：&#123;&#123;item.name&#125;&#125;，商品库存:</span><br><span class="line">          <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeStock(item, item.stock - 1)&quot;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">          &#123;&#123;item.stock?item.stock:&#x27;无货&#x27;&#125;&#125;</span><br><span class="line">          <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeStock(item, item.stock + 1)&quot;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">          <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;remove(i)&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>总库存: &#123;&#123;total&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./vue.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span> // 引入vue.js</span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123; <span class="comment">// 创建Vue实例 ，可以获取和操作对象实例， vm.products和data里数据一样</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&quot;#app&quot;</span>, <span class="comment">// el选中的元素将会被Vue管控</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 页面中要使用的数据</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">products</span>: [</span></span><br><span class="line"><span class="language-javascript">            &#123; <span class="attr">name</span>: <span class="string">&quot;iphone&quot;</span>, <span class="attr">stock</span>: <span class="number">10</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">            &#123; <span class="attr">name</span>: <span class="string">&quot;xiaomi&quot;</span>, <span class="attr">stock</span>: <span class="number">9</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">            &#123; <span class="attr">name</span>: <span class="string">&quot;huawei&quot;</span>, <span class="attr">stock</span>: <span class="number">8</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">          ],</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">computed</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="title function_">total</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">products</span>.<span class="title function_">reduce</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b.<span class="property">stock</span>, <span class="number">0</span>);</span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="title function_">changeStock</span>(<span class="params">product, newStock</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (newStock &lt; <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">              newStock = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            product.<span class="property">stock</span> = newStock; <span class="comment">// 数据变化</span></span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">          <span class="title function_">remove</span>(<span class="params">index</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">products</span>.<span class="title function_">splice</span>(index, <span class="number">1</span>);</span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="三、核心概念"><a href="#三、核心概念" class="headerlink" title="三、核心概念"></a>三、核心概念</h1><h2 id="1-注入"><a href="#1-注入" class="headerlink" title="1.注入"></a>1.注入</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20201110163548.png" alt="image-20201110163548294"></p>
<p>vue会将以下配置注入到vue实例：</p>
<ul>
<li>data：和界面相关的数据</li>
<li>computed：通过已有数据计算得来的数据，将来详细讲解</li>
<li>methods：方法</li>
<li>注入后就会有数据响应式</li>
</ul>
<blockquote>
<p>模板中可以使用vue实例中的成员</p>
</blockquote>
<h2 id="2-虚拟DOM树"><a href="#2-虚拟DOM树" class="headerlink" title="2.虚拟DOM树"></a>2.虚拟DOM树</h2><p>因为重排回流等种种原因，直接操作真实的DOM会引发严重的效率问题，vue使用虚拟DOM（vnode）的方式来描述要渲染的内容</p>
<p>vnode是一个<strong>普通的</strong>JS对象，用于描述界面上应该有什么，比如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> vnode = &#123;</span><br><span class="line">  <span class="attr">tag</span>: <span class="string">&quot;h1&quot;</span>,</span><br><span class="line">  <span class="attr">children</span>: [</span><br><span class="line">    &#123; <span class="attr">tag</span>: <span class="literal">undefined</span>, <span class="attr">text</span>: <span class="string">&quot;第一个vue应用：Hello World&quot;</span>&#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面的对象描述了：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">有一个标签名为h1的节点，它有一个子节点，该子节点是一个文本，内容为「第一个vue应用：Hello World」</span><br></pre></td></tr></table></figure>

<p><strong>vue模板并不是真实的DOM，它会被编译为虚拟DOM</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>第一个vue应用：&#123;&#123;title&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>作者：&#123;&#123;author&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>上面的模板会被编译为类似下面结构的虚拟DOM</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">tag</span>: <span class="string">&quot;div&quot;</span>,</span><br><span class="line">  <span class="attr">children</span>: [</span><br><span class="line">    &#123; <span class="attr">tag</span>: <span class="string">&quot;h1&quot;</span>, <span class="attr">children</span>: [ &#123; <span class="attr">text</span>: <span class="string">&quot;第一个vue应用：Hello World&quot;</span> &#125; ] &#125;,</span><br><span class="line">    &#123; <span class="attr">tag</span>: <span class="string">&quot;p&quot;</span>, <span class="attr">children</span>: [ &#123; <span class="attr">text</span>: <span class="string">&quot;作者：袁&quot;</span> &#125; ] &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>虚拟DOM树会最终生成为真实的DOM树</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20201106144536.png" alt="image-20201106144536733"></p>
<p>当数据变化后，将引发重新渲染，vue会比较新旧两棵vnode tree，找出差异，然后仅把差异部分应用到真实dom tree中</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20201106145409.png" alt="image-20201106145409844"></p>
<p><strong>可见，在vue中，要得到最终的界面，必须要生成一个vnode tree</strong></p>
<p>vue通过以下逻辑生成vnode tree：</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20201106152046.png" style="zoom:40%;" />



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  // 如果不写render方法，vue会将模板里面的内容编译成render方法，模板就是template。如果模板也没有就会将el配置的内容当成模板</span><br><span class="line">  var vm = new Vue(&#123;</span><br><span class="line">    el: &quot;#app&quot;,</span><br><span class="line">    data: &#123;</span><br><span class="line">      title: &#x27;hello&#x27;,</span><br><span class="line">      text： &#x27;vue&#x27;</span><br><span class="line">    &#125;,</span><br><span class="line">    render(h) &#123;</span><br><span class="line">      return h(&#x27;div&#x27;,[</span><br><span class="line">        h(&#x27;h1&#x27;, this.title),</span><br><span class="line">        h(&#x27;p&#x27;, this.text)</span><br><span class="line">      ])</span><br><span class="line">    &#125;,</span><br><span class="line">    template:`&lt;div&gt;&lt;h1&gt;hello&lt;/h1&gt;&lt;p&gt;vue&lt;/p&gt;&lt;/div&gt;`</span><br><span class="line">  &#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><strong>注意：虚拟节点树必须是单根的，也就是只能有一个根节点</strong></p>
<h2 id="3-挂载"><a href="#3-挂载" class="headerlink" title="3.挂载"></a>3.挂载</h2><p>将生成的真实DOM树，放置到某个元素位置，称之为<strong>挂载</strong></p>
<p>挂载的方式：</p>
<ol>
<li>通过<code>el:&quot;css选择器&quot;</code>进行配置</li>
<li>通过<code>vue实例.$mount(&quot;css选择器&quot;)</code>进行配置</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">// 普通挂载</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  // 如果不写render方法，vue会将template模板里面的内容编译成render方法。如果没有配置模板就会将el配置的内容当成模板</span><br><span class="line">  var vm = new Vue(&#123;</span><br><span class="line">    el: &quot;#app&quot;,</span><br><span class="line">    data: &#123;</span><br><span class="line">      title: &#x27;hello&#x27;,</span><br><span class="line">      text： &#x27;vue&#x27;</span><br><span class="line">    &#125;,</span><br><span class="line">    render(h) &#123;</span><br><span class="line">      return h(&#x27;div&#x27;,[</span><br><span class="line">        h(&#x27;h1&#x27;, this.title),</span><br><span class="line">        h(&#x27;p&#x27;, this.text)</span><br><span class="line">      ])</span><br><span class="line">    &#125;,</span><br><span class="line">    template:`&lt;div&gt;&lt;h1&gt;hello&lt;/h1&gt;&lt;p&gt;vue&lt;/p&gt;&lt;/div&gt;`</span><br><span class="line">  &#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">// $mount挂载</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  var vm = new Vue(&#123;</span><br><span class="line">    data: &#123;</span><br><span class="line">      title: &#x27;hello&#x27;,</span><br><span class="line">      text： &#x27;vue&#x27;</span><br><span class="line">    &#125;,</span><br><span class="line">    render(h) &#123;</span><br><span class="line">      return h(&#x27;div&#x27;,[</span><br><span class="line">        h(&#x27;h1&#x27;, this.title),</span><br><span class="line">        h(&#x27;p&#x27;, this.text)</span><br><span class="line">      ])</span><br><span class="line">    &#125;,</span><br><span class="line">    template:`&lt;div&gt;&lt;h1&gt;hello&lt;/h1&gt;&lt;p&gt;vue&lt;/p&gt;&lt;/div&gt;`</span><br><span class="line">  &#125;);</span><br><span class="line">  vm.$mount(&#x27;#app&#x27;) // 挂载到#app中</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h2 id="4-完整流程"><a href="#4-完整流程" class="headerlink" title="4.完整流程"></a>4.完整流程</h2><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20200908051939.png" alt="image-20200908051939745" style="zoom:50%;" />

<h1 id="四、组件"><a href="#四、组件" class="headerlink" title="四、组件"></a>四、组件</h1><p>组件的出现是为了实现以下两个目标：</p>
<ol>
<li>降低整体复杂度，提升代码的可读性和可维护性</li>
<li>提升局部代码的可复用性</li>
</ol>
<p>绝大部分情况下，一个组件就是页面中某个区域，组件包含该区域的：</p>
<ul>
<li><p>功能（JS代码）</p>
</li>
<li><p>内容（模板代码）</p>
</li>
<li><p>样式（CSS代码）</p>
<blockquote>
<p>要在组件中包含样式，需要构建工具的支撑</p>
</blockquote>
</li>
</ul>
<h2 id="1-组件开发"><a href="#1-组件开发" class="headerlink" title="1.组件开发"></a>1.组件开发</h2><h3 id="创建组件"><a href="#创建组件" class="headerlink" title="创建组件"></a>创建组件</h3><p>组件是根据一个普通的配置对象创建的，所以要开发一个组件，只需要写一个配置对象即可</p>
<p>该配置对象和vue实例的配置是<strong>几乎一样</strong>的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//组件配置对象</span></span><br><span class="line"><span class="keyword">var</span> myComp = &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">template</span>: <span class="string">`....`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>值得注意的是，组件配置对象和vue实例有以下几点差异：</p>
<ul>
<li>无<code>el</code></li>
<li><code>data</code>必须是一个函数，该函数返回的对象作为数据</li>
<li>由于没有<code>el</code>配置，组件的虚拟DOM树必须定义在<code>template</code>或<code>render</code>中</li>
</ul>
<h3 id="注册组件"><a href="#注册组件" class="headerlink" title="注册组件"></a>注册组件</h3><p>注册组件分为两种方式，一种是<strong>全局注册</strong>，一种是<strong>局部注册</strong></p>
<h4 id="全局注册"><a href="#全局注册" class="headerlink" title="全局注册"></a>全局注册</h4><p>一旦全局注册了一个组件，整个应用中任何地方都可以使用该组件</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/2020-02-18-10-24-44.png" style="zoom:50%;" />

<p>全局注册的方式是：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 参数1：组件名称，将来在模板中使用组件时，会使用该名称</span></span><br><span class="line"><span class="comment">// 参数2：组件配置对象</span></span><br><span class="line"><span class="comment">// 该代码运行后，即可在模板中使用组件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;my-comp&#x27;</span>, myComp)</span><br></pre></td></tr></table></figure>

<p>在模板中，可以使用组件了</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">my-comp</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 或 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">my-comp</span>&gt;</span><span class="tag">&lt;/<span class="name">my-comp</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>例子</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot; /&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot; /&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;!-- 模板 -&gt; vue -&gt; 真实的dom --&gt;</span><br><span class="line">    &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;script src=&quot;./vue.min.js&quot;&gt;&lt;/script&gt; // 引入vue.js</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">      var myButton = &#123;</span><br><span class="line">          data()&#123;</span><br><span class="line">              return &#123;</span><br><span class="line">                  count: 0</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          template: `&lt;button onclick=&#x27;count++&#x27;&gt;当前点击了&#123;&#123; count &#125;&#125;次&lt;/button&gt;`</span><br><span class="line">      &#125;;</span><br><span class="line">      // 全局注册了一个组件</span><br><span class="line">      Vue.component(&#x27;MyButton&#x27;,myButton);</span><br><span class="line">      var vm = new Vue(&#123;</span><br><span class="line">        data: &#123;&#125;,</span><br><span class="line">        template: `&lt;div&gt;</span><br><span class="line">        	&lt;MyButton /&gt; // 组件中data必须是个函数的原因就在这，每创建一个组件实例都会生成一个data,如果用对象的话，会共用同一个data</span><br><span class="line">        	&lt;MyButton /&gt;</span><br><span class="line">        	&lt;MyButton /&gt;</span><br><span class="line">        	&lt;MyButton /&gt;</span><br><span class="line">        	&lt;MyButton /&gt;</span><br><span class="line">        	&lt;MyButton /&gt;</span><br><span class="line">        &lt;/div&gt;`</span><br><span class="line">      &#125;);</span><br><span class="line">      vm.$mount(&#x27;#app&#x27;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>


<blockquote>
<p>但在一些工程化的大型项目中，很多组件都不需要全局使用。<br>比如一个登录组件，只有在登录的相关页面中使用，如果全局注册，将导致构建工具无法优化打包<br><strong>因此，除非组件特别通用，否则不建议使用全局注册</strong></p>
</blockquote>
<h4 id="局部注册"><a href="#局部注册" class="headerlink" title="局部注册"></a>局部注册</h4><p>局部注册就是哪里要用到组件，就在哪里注册</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/2020-02-18-10-28-45.png" style="zoom:50%;" />

<p>局部注册的方式是，在要使用组件的组件或实例中加入一个配置：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这是另一个要使用my-comp的组件</span></span><br><span class="line"><span class="keyword">var</span> otherComp = &#123;</span><br><span class="line">  <span class="attr">components</span>:&#123;</span><br><span class="line">    <span class="comment">// 属性名为组件名称，模板中将使用该名称</span></span><br><span class="line">    <span class="comment">// 属性值为组件配置对象</span></span><br><span class="line">    <span class="string">&quot;my-comp&quot;</span>: myComp</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;</span></span><br><span class="line"><span class="string">      &lt;!-- 该组件的其他内容 --&gt;</span></span><br><span class="line"><span class="string">      &lt;my-comp&gt;&lt;/my-comp&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="应用组件"><a href="#应用组件" class="headerlink" title="应用组件"></a>应用组件</h3><p>在模板中使用组件特别简单，把组件名当作HTML元素名使用即可。</p>
<p>但要注意以下几点：</p>
<ol>
<li><strong>组件必须有结束</strong></li>
</ol>
<p>组件可以自结束，也可以用结束标记结束，但必须要有结束</p>
<p>下面的组件使用是错误的：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">my-comp</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li><strong>组件的命名</strong></li>
</ol>
<p>无论你使用哪种方式注册组件，组件的命名需要遵循规范。</p>
<p>组件可以使用<code>kebab-case 短横线命名法</code>，也可以使用<code>PascalCase 大驼峰命名法</code></p>
<p>下面两种命名均是可以的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> otherComp = &#123;</span><br><span class="line">  <span class="attr">components</span>:&#123;</span><br><span class="line">    <span class="string">&quot;my-comp&quot;</span>: myComp,  <span class="comment">// 方式1</span></span><br><span class="line">    <span class="title class_">MyComp</span>: myComp <span class="comment">//方式2</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>实际上，使用<code>小驼峰命名法 camelCase</code>也是可以识别的，只不过不符合官方要求的规范</p>
</blockquote>
<p>使用<code>PascalCase</code>方式命名还有一个额外的好处，即可以在模板中使用两种组件名</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> otherComp = &#123;</span><br><span class="line">  <span class="attr">components</span>:&#123;</span><br><span class="line">    <span class="title class_">MyComp</span>: myComp</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>模板中：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 可用 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">my-comp</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">MyComp</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>因此，在使用组件时，为了方便，往往使用以下代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">MyComp</span> = &#123;</span><br><span class="line">  <span class="comment">//组件配置</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">OtherComp</span> = &#123;</span><br><span class="line">  <span class="attr">components</span>:&#123;</span><br><span class="line">    <span class="title class_">MyComp</span> <span class="comment">// ES6速写属性</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="2-组件树"><a href="#2-组件树" class="headerlink" title="2.组件树"></a>2.组件树</h2><p>一个组件创建好后，往往会在各种地方使用它。它可能多次出现在vue实例中，也可能出现在其他组件中。</p>
<p>于是就形成了一个组件树</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/2020-02-18-11-00-58.png" style="zoom:50%;" />

<h2 id="3-向组件传递数据"><a href="#3-向组件传递数据" class="headerlink" title="3.向组件传递数据"></a>3.向组件传递数据</h2><p>大部分组件要完成自身的功能，都需要一些额外的信息</p>
<p>比如一个头像组件，需要告诉它头像的地址，这就需要在使用组件时向组件传递数据</p>
<p>传递数据的方式有很多种，最常见的一种是使用<strong>组件属性 component props</strong></p>
<p>首先在组件中申明可以接收哪些属性:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">MyComp</span> = &#123;</span><br><span class="line">  <span class="attr">props</span>:[<span class="string">&quot;p1&quot;</span>, <span class="string">&quot;p2&quot;</span>, <span class="string">&quot;p3&quot;</span>],</span><br><span class="line">  <span class="comment">// 和vue实例一样，使用组件时也会创建组件的实例</span></span><br><span class="line">  <span class="comment">// 而组件的属性会被提取到组件实例中，因此可以在模板中使用</span></span><br><span class="line">  <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;</span></span><br><span class="line"><span class="string">      &#123;&#123;p1&#125;&#125;, &#123;&#123;p2&#125;&#125;, &#123;&#123;p3&#125;&#125;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在使用组件时，向其传递属性：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">OtherComp</span> = &#123;</span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    <span class="title class_">MyComp</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">a</span>:<span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;my-comp :p1=&quot;a&quot; :p2=&quot;2&quot; p3=&quot;3&quot;/&gt;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意：在组件中，属性是只读的，绝不可以更改，这叫做单向数据流</strong></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/2020-02-18-11-13-19.png" style="zoom:50%;" />

<h2 id="4-工程结构"><a href="#4-工程结构" class="headerlink" title="4.工程结构"></a>4.工程结构</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// index.html</span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./src/main.js&quot;</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="comment">// 入口模块文件</span></span><br><span class="line"><span class="comment">// 创建vue实例</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;./vue.browser.js&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&quot;./App.js&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">render</span>: <span class="function">(<span class="params">h</span>) =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>), <span class="comment">// 渲染组件App</span></span><br><span class="line">&#125;).$mount(<span class="string">&quot;#app&quot;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">MyButton</span> <span class="keyword">from</span> <span class="string">&quot;./components/MyButton.js&quot;</span>;</span><br><span class="line"><span class="comment">// vue的根组件</span></span><br><span class="line"><span class="keyword">const</span> template = <span class="string">`</span></span><br><span class="line"><span class="string">&lt;div&gt;</span></span><br><span class="line"><span class="string">  &lt;h1&gt;App组件&lt;/h1&gt;</span></span><br><span class="line"><span class="string">  &lt;MyButton /&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    <span class="title class_">MyButton</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  template,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/components/MyButton.js</span></span><br><span class="line"><span class="keyword">const</span> template = <span class="string">`&lt;button @click=&quot;count++&quot;&gt;当前点击了&#123;&#123;count&#125;&#125;次&lt;/button&gt;`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  template,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h1 id="五、搭建工程"><a href="#五、搭建工程" class="headerlink" title="五、搭建工程"></a>五、搭建工程</h1><blockquote>
<p>vue-cli: <a target="_blank" rel="noopener" href="https://cli.vuejs.org/zh/">https://cli.vuejs.org/zh/</a></p>
</blockquote>
<h2 id="1-vue-cli"><a href="#1-vue-cli" class="headerlink" title="1.vue-cli"></a>1.vue-cli</h2><p><code>vue-cli</code>是一个脚手架工具，用于搭建<code>vue</code>工程</p>
<p>它内部使用了<code>webpack</code>，并预置了诸多插件（<code>plugin</code>）和加载器（<code>loader</code>），以达到开箱即用的效果</p>
<p>除了基本的插件和加载器外，<code>vue-cli</code>还预置了：</p>
<ul>
<li>babel</li>
<li>webpack-dev-server</li>
<li>eslint</li>
<li>postcss</li>
<li>less-loader</li>
</ul>
<h2 id="2-SFC"><a href="#2-SFC" class="headerlink" title="2.SFC"></a>2.SFC</h2><p>单文件组件，Single File Component，即一个文件就包含了一个组件所需的全部代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 组件模板代码 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 组件配置</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">	<span class="comment">/* 组件样式 */</span></span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>例子：头像组件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;img</span><br><span class="line">    class=&quot;avatar-container&quot;</span><br><span class="line">    :src=&quot;url&quot;</span><br><span class="line">    :style=&quot;&#123;</span><br><span class="line">      width: size + &#x27;px&#x27;,</span><br><span class="line">      height: size + &#x27;px&#x27;,</span><br><span class="line">    &#125;&quot;</span><br><span class="line">  /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    url: &#123;</span><br><span class="line">      type: String, // url属性必须是一个字符串</span><br><span class="line">      required: true, // 属性必传</span><br><span class="line">    &#125;,</span><br><span class="line">    size: &#123;</span><br><span class="line">      type: Number,</span><br><span class="line">      default: 150,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">/* 带有作用域的样式 */</span><br><span class="line">/* scoped的原理是给每个组件都加一个独一无二的属性，然后再利用属性选择器添加样式，当然同一个组件的属性是相同的 */</span><br><span class="line">.avatar-container &#123;</span><br><span class="line">  border-radius: 50%;</span><br><span class="line">  object-fit: cover;</span><br><span class="line">  display: block;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="3-预编译"><a href="#3-预编译" class="headerlink" title="3.预编译"></a>3.预编译</h2><p>当<code>vue-cli</code>进行<strong>打包</strong>时，会直接把组件中的模板转换为<code>render</code>函数，这叫做模板预编译</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 预编译即先打包再运行</span></span><br><span class="line">源代码 -&gt; 打包 -&gt; 运行</span><br><span class="line"><span class="comment">// 将template写在script里面的话就是先运行再编译</span></span><br></pre></td></tr></table></figure>

<p>这样做的好处在于：</p>
<ol>
<li>运行时就不再需要编译模板了，提高了运行效率</li>
<li>打包结果中不再需要vue的编译代码，减少了打包体积</li>
</ol>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20201111155613.png" alt="image-20201111155613940" style="zoom:50%;" />

<h1 id="六、计算属性"><a href="#六、计算属性" class="headerlink" title="六、计算属性"></a>六、计算属性</h1><p>例子引出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1&gt;App组件&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; count &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;p&gt;姓：&#123;&#123; firstName &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;名：&#123;&#123; lastName &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;全名：&#123;&#123; fullName &#125;&#125;&lt;/p&gt; // 如果把fullName换成getFullName()就会连续调用多次</span><br><span class="line">    &lt;p&gt;全名：&#123;&#123; fullName &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;全名：&#123;&#123; fullName &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;全名：&#123;&#123; fullName &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;全名：&#123;&#123; fullName &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;button @click=&quot;fullName = &#x27;姬成&#x27;&quot;&gt;修改姓名为姬成&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;count++&quot;&gt;count++&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      firstName: &quot;袁&quot;,</span><br><span class="line">      lastName: &quot;进&quot;,</span><br><span class="line">      count: 0,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    fullName: &#123;</span><br><span class="line">      get() &#123;</span><br><span class="line">        console.log(&quot;fullname called&quot;);</span><br><span class="line">        return this.firstName + &quot; &quot; + this.lastName + Date.now(); // 时间不会变化只会有一个固定值。</span><br><span class="line">      &#125;,</span><br><span class="line">      set(val) &#123;</span><br><span class="line">        console.log(&quot;正在设置全名&quot;, val);</span><br><span class="line">        this.firstName = val[0];</span><br><span class="line">        this.lastName = val.substr(1);</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    getFullName() &#123;</span><br><span class="line">      console.log(&quot;method called&quot;);</span><br><span class="line">      return this.firstName + &quot; &quot; + this.lastName;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>面试题：计算属性和方法有什么区别？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">计算属性本质上是包含getter和setter的方法</span><br><span class="line">当获取计算属性时，实际上是在调用计算属性的getter方法。vue会收集计算属性的依赖，并缓存计算属性的返回结果。只有当依赖变化后才会重新进行计算。</span><br><span class="line">方法没有缓存，每次调用方法都会导致重新执行。</span><br><span class="line">计算属性的getter和setter参数固定，getter没有参数，setter只有一个参数。而方法的参数不限。</span><br><span class="line">由于有以上的这些区别，因此计算属性通常是根据已有数据得到其他数据，并在得到数据的过程中不建议使用异步、当前时间、随机数等副作用操作。</span><br><span class="line">实际上，他们最重要的区别是含义上的区别。计算属性含义上也是一个数据，可以读取也可以赋值；方法含义上是一个操作，用于处理一些事情。</span><br></pre></td></tr></table></figure>



<p>完整的计算属性书写：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">  <span class="attr">propName</span>: &#123;</span><br><span class="line">    <span class="title function_">get</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="comment">// getter 只要依赖不变，get()就不会被再次调用</span></span><br><span class="line">	  <span class="comment">// return Date.now() 只会调用一次，因为Date.now()不是注入的数据，没有响应式</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">set</span>(<span class="params">val</span>)&#123;</span><br><span class="line">      <span class="comment">// setter</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>只包含getter的计算属性简写：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">  <span class="title function_">propName</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">// getter</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>补充：字体图标组件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;i class=&quot;iconfont icon-container&quot; :class=&quot;fontClass&quot;&gt;&lt;/i&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">const classMap = &#123;</span><br><span class="line">  home: &quot;iconzhuye&quot;,</span><br><span class="line">  success: &quot;iconzhengque&quot;,</span><br><span class="line">  error: &quot;iconcuowu&quot;,</span><br><span class="line">  close: &quot;iconguanbi&quot;,</span><br><span class="line">  warn: &quot;iconjinggao&quot;,</span><br><span class="line">  info: &quot;iconxinxi&quot;,</span><br><span class="line">  blog: &quot;iconblog&quot;,</span><br><span class="line">  code: &quot;iconcode&quot;,</span><br><span class="line">  about: &quot;iconset_about_hov&quot;,</span><br><span class="line">  weixin: &quot;iconweixin&quot;,</span><br><span class="line">  mail: &quot;iconemail&quot;,</span><br><span class="line">  github: &quot;icongithub&quot;,</span><br><span class="line">  qq: &quot;iconsign_qq&quot;,</span><br><span class="line">  arrowUp: &quot;iconiconfonticonfonti2copy&quot;,</span><br><span class="line">  arrowDown: &quot;iconiconfonticonfonti2&quot;,</span><br><span class="line">  empty: &quot;iconempty&quot;,</span><br><span class="line">  chat: &quot;iconliuyan&quot;,</span><br><span class="line">&#125;;</span><br><span class="line">export const types = Object.keys(classMap);</span><br><span class="line">export default &#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    type: &#123;</span><br><span class="line">      type: String,</span><br><span class="line">      required: true,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    // 图标类样式</span><br><span class="line">    fontClass() &#123;</span><br><span class="line">      return classMap[this.type];</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">@import &quot;//at.alicdn.com/t/font_2164449_nalfgtq7il.css&quot;;</span><br><span class="line">.iconfont &#123;</span><br><span class="line">  color: inherit;</span><br><span class="line">  font-size: inherit;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p><strong>作用域样式对子组件根组件元素的影响</strong></p>
<p>为了完成某种特定样式，而不影响原来子组件的样式。我们可以在父组件中对子组件的样式进行修改，我们在父组件中选择<code>a</code>同时也会选中子组件的<code>a</code>。vue会给子组件添加父组件的属性类名。</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://gitee.com/xlt-vue/frontend-training/raw/master/08.%20vue%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E6%88%98/06.%20%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7/%E8%AF%BE%E4%BB%B6/%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%A0%B7%E5%BC%8F%E5%AF%B9%E5%AD%90%E7%BB%84%E4%BB%B6%E6%A0%B9%E5%85%83%E7%B4%A0%E7%9A%84%E5%BD%B1%E5%93%8D.jpg" style="zoom:50%;" />

<h1 id="七、组件事件"><a href="#七、组件事件" class="headerlink" title="七、组件事件"></a>七、组件事件</h1><h2 id="1-pager组件"><a href="#1-pager组件" class="headerlink" title="1.pager组件"></a>1.pager组件</h2><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20201113130301.png" style="zoom:50%;" />

<h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><table>
<thead>
<tr>
<th>属性名</th>
<th>含义</th>
<th>类型</th>
<th>必填</th>
<th>默认值</th>
</tr>
</thead>
<tbody><tr>
<td>current</td>
<td>当前页码</td>
<td>Number</td>
<td>否</td>
<td>1</td>
</tr>
<tr>
<td>total</td>
<td>总数据量</td>
<td>Number</td>
<td>否</td>
<td>0</td>
</tr>
<tr>
<td>limit</td>
<td>页容量</td>
<td>Number</td>
<td>否</td>
<td>10</td>
</tr>
<tr>
<td>visibleNumber</td>
<td>可见页码数</td>
<td>Number</td>
<td>否</td>
<td>10</td>
</tr>
</tbody></table>
<h3 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h3><table>
<thead>
<tr>
<th>事件名</th>
<th>含义</th>
<th>事件参数</th>
<th>参数类型</th>
</tr>
</thead>
<tbody><tr>
<td>pageChange</td>
<td>页码变化</td>
<td>新的页码</td>
<td>Number</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line">// 分页器</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- 只有总页数大于1时才显示 --&gt;</span><br><span class="line">  &lt;div class=&quot;pager-container&quot; v-if=&quot;pageNumber &gt; 1&quot;&gt;</span><br><span class="line">    &lt;a @click=&quot;handleClick(1)&quot; :class=&quot;&#123; disabled: current === 1 &#125;&quot;&gt;</span><br><span class="line">      |&amp;lt;&amp;lt;</span><br><span class="line">    &lt;/a&gt;</span><br><span class="line">    &lt;a @click=&quot;handleClick(current - 1)&quot; :class=&quot;&#123; disabled: current === 1 &#125;&quot;&gt;</span><br><span class="line">      &amp;lt;&amp;lt;</span><br><span class="line">    &lt;/a&gt;</span><br><span class="line">    &lt;a</span><br><span class="line">      @click=&quot;handleClick(n)&quot; // handleClick($event,n) $event是事件参数， n是自定义参数</span><br><span class="line">      v-for=&quot;(n, i) in numbers&quot;</span><br><span class="line">      :key=&quot;i&quot;</span><br><span class="line">      :class=&quot;&#123; active: n === current &#125;&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &#123;&#123; n &#125;&#125;</span><br><span class="line">    &lt;/a&gt;</span><br><span class="line"></span><br><span class="line">    &lt;a</span><br><span class="line">      @click=&quot;handleClick(current + 1)&quot;</span><br><span class="line">      :class=&quot;&#123; disabled: current === pageNumber &#125;&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &amp;gt;&amp;gt;</span><br><span class="line">    &lt;/a&gt;</span><br><span class="line">    &lt;a</span><br><span class="line">      @click=&quot;handleClick(pageNumber)&quot;</span><br><span class="line">      :class=&quot;&#123; disabled: current === pageNumber &#125;&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &amp;gt;&amp;gt;|</span><br><span class="line">    &lt;/a&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    current: &#123;</span><br><span class="line">      type: Number,</span><br><span class="line">      default: 1,</span><br><span class="line">    &#125;,</span><br><span class="line">    total: &#123;</span><br><span class="line">      type: Number,</span><br><span class="line">      default: 0,</span><br><span class="line">    &#125;,</span><br><span class="line">    limit: &#123;</span><br><span class="line">      type: Number,</span><br><span class="line">      default: 10,</span><br><span class="line">    &#125;,</span><br><span class="line">    visibleNumber: &#123;</span><br><span class="line">      type: Number,</span><br><span class="line">      default: 10,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    // 总页数</span><br><span class="line">    pageNumber() &#123;</span><br><span class="line">      return Math.ceil(this.total / this.limit);</span><br><span class="line">    &#125;,</span><br><span class="line">    // 得到显示的最小数字</span><br><span class="line">    visibleMin() &#123;</span><br><span class="line">      let min = this.current - Math.floor(this.visibleNumber / 2);</span><br><span class="line">      if (min &lt; 1) &#123;</span><br><span class="line">        min = 1;</span><br><span class="line">      &#125;</span><br><span class="line">      return min;</span><br><span class="line">    &#125;,</span><br><span class="line">    visibleMax() &#123;</span><br><span class="line">      let max = this.visibleMin + this.visibleNumber - 1;</span><br><span class="line">      if (max &gt; this.pageNumber) &#123;</span><br><span class="line">        max = this.pageNumber;</span><br><span class="line">      &#125;</span><br><span class="line">      return max;</span><br><span class="line">    &#125;,</span><br><span class="line">    numbers() &#123;</span><br><span class="line">      let nums = [];</span><br><span class="line">      for (let i = this.visibleMin; i &lt;= this.visibleMax; i++) &#123;</span><br><span class="line">        nums.push(i);</span><br><span class="line">      &#125;</span><br><span class="line">      return nums;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    handleClick(newPage) &#123;</span><br><span class="line">      if (newPage &lt; 1) &#123;</span><br><span class="line">        newPage = 1;</span><br><span class="line">      &#125;</span><br><span class="line">      if (newPage &gt; this.pageNumber) &#123;</span><br><span class="line">        newPage = this.pageNumber;</span><br><span class="line">      &#125;</span><br><span class="line">      if (newPage === this.current) &#123;</span><br><span class="line">        return;</span><br><span class="line">      &#125;</span><br><span class="line">      // 抛出一个事件</span><br><span class="line">      this.$emit(&quot;pageChange&quot;, newPage);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line">@import &quot;~@/styles/var.less&quot;;</span><br><span class="line">.pager-container &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: center;</span><br><span class="line">  margin: 20px 0;</span><br><span class="line">  a &#123;</span><br><span class="line">    color: @primary;</span><br><span class="line">    margin: 0 6px;</span><br><span class="line">    cursor: pointer;</span><br><span class="line">    &amp;.disabled &#123;</span><br><span class="line">      color: @lightWords;</span><br><span class="line">      cursor: not-allowed;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;.active &#123;</span><br><span class="line">      color: @words;</span><br><span class="line">      font-weight: bold;</span><br><span class="line">      cursor: text;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="2-知识点"><a href="#2-知识点" class="headerlink" title="2.知识点"></a>2.知识点</h2><ol>
<li><strong>全局样式</strong></li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js 引入全局样式</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./styles/global.less&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>一般网站为保持美观性，所用颜色应该比较少，为了方便使用和以后统一改变，我们可以使用颜色变量</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// var.less</span></span><br><span class="line"><span class="variable">@danger:</span> <span class="number">#cc3600</span>; <span class="comment">// 危险、错误</span></span><br><span class="line"><span class="variable">@primary:</span> <span class="number">#6b9eee</span>; <span class="comment">// 主色调、链接</span></span><br><span class="line"><span class="variable">@words:</span> <span class="number">#373737</span>; <span class="comment">// 大部分文字、深色文字</span></span><br><span class="line"><span class="variable">@lightWords:</span> <span class="number">#999</span>; <span class="comment">// 少部分文字、浅色文字</span></span><br><span class="line"><span class="variable">@warn:</span> <span class="number">#dc6a12</span>; <span class="comment">// 警告</span></span><br><span class="line"><span class="variable">@success:</span> <span class="number">#7ebf50</span>; <span class="comment">// 成功</span></span><br><span class="line"><span class="variable">@gray:</span> <span class="number">#b4b8bc</span>; <span class="comment">// 灰色</span></span><br><span class="line"><span class="variable">@dark:</span> <span class="number">#202020</span>; <span class="comment">// 深色</span></span><br></pre></td></tr></table></figure>

<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// global.less</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&quot;./var.less&quot;</span>; <span class="comment">// 样式文件中引入需要加@</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">@words</span>;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&quot;-apple-system&quot;</span>, <span class="string">&quot;BlinkMacSystemFont&quot;</span>, <span class="string">&quot;Roboto&quot;</span>, <span class="string">&quot;Helvetica Neue&quot;</span>,</span><br><span class="line">    <span class="string">&quot;微软雅黑&quot;</span>, sans-serif;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: inherit;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none;</span><br><span class="line">  <span class="selector-tag">&amp;</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="variable">@primary</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>补充</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在script中引入使用 import &#x27;@/..&#x27; @指src</span></span><br><span class="line"><span class="comment">// 在style中引入使用 @import &#x27;~@/styles/var.less&#x27;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li><strong>v-if 和 v-show</strong></li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20201113133827.png" alt="image-20201113133827438"></p>
<hr>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20201113134051.png" alt="image-20201113134051281"></p>
<p><strong>面试题：v-if 和 v-show 有什么区别？</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">v-if能够控制是否生成vnode，也就间接控制了是否生成对应的dom。当v-if为true时，会生成对应的vnode，并生成对应的dom元素；当其为false时，不会生成对应的vnode，自然不会生成任何的dom元素。</span><br><span class="line">v-show始终会生成vnode，也就间接导致了始终生成dom。它只是控制dom的display属性，当v-show为true时，不做任何处理；当其为false时，生成的dom的display属性为none。</span><br><span class="line">使用v-if可以有效的减少树的节点和渲染量，但也会导致树的不稳定；而使用v-show可以保持树的稳定，但不能减少树的节点和渲染量。</span><br><span class="line">因此，在实际开发中，显示状态变化频繁的情况下应该使用v-show，以保持树的稳定；显示状态变化较少时应该使用v-if，以减少树的节点和渲染量。</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><strong>组件事件</strong></li>
</ol>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20201113134557.png" alt="image-20201113134557175" style="zoom:40%;" />

<p>抛出事件：子组件在某个时候发生了一件事，但自身无法处理，于是通过事件的方式通知父组件处理</p>
<p>事件参数：子组件抛出事件时，传递给父组件的数据</p>
<p>注册事件：父组件申明，当子组件发生某件事的时候，自身将做出一些处理</p>
<h1 id="八、优化工程结构"><a href="#八、优化工程结构" class="headerlink" title="八、优化工程结构"></a>八、优化工程结构</h1><h2 id="1-如何使用组件？"><a href="#1-如何使用组件？" class="headerlink" title="1.如何使用组件？"></a>1.如何使用组件？</h2><p>编写组件说明文档</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./src/components/README.md</span><br></pre></td></tr></table></figure>

<h2 id="2-如何测试组件效果？"><a href="#2-如何测试组件效果？" class="headerlink" title="2.如何测试组件效果？"></a>2.如何测试组件效果？</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./components/<span class="title class_">Pager</span>/test.<span class="property">vue</span></span><br><span class="line"><span class="comment">// 在这里面编写测试组件，然后根据下面文档使用</span></span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://cli.vuejs.org/zh/guide/prototyping.html">https://cli.vuejs.org/zh/guide/prototyping.html</a></p>
<h1 id="九、组件练习"><a href="#九、组件练习" class="headerlink" title="九、组件练习"></a>九、组件练习</h1><h2 id="1-Avatar"><a href="#1-Avatar" class="headerlink" title="1.Avatar"></a>1.Avatar</h2><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20201130153821.png" alt="image-20201130153821293" style="zoom:50%;" />

<h3 id="属性-1"><a href="#属性-1" class="headerlink" title="属性"></a>属性</h3><table>
<thead>
<tr>
<th>属性名</th>
<th>含义</th>
<th>类型</th>
<th>必填</th>
<th>默认值</th>
</tr>
</thead>
<tbody><tr>
<td>url</td>
<td>头像图片路径</td>
<td>String</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>size</td>
<td>头像尺寸，宽高相等</td>
<td>Number</td>
<td>否</td>
<td>150</td>
</tr>
</tbody></table>
<h2 id="2-Icon"><a href="#2-Icon" class="headerlink" title="2.Icon"></a>2.Icon</h2><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20201130153927.png" alt="image-20201130153927256" style="zoom:50%;" />

<p>图标组件</p>
<p>使用的图标源来自于「阿里巴巴矢量库」</p>
<h3 id="属性-2"><a href="#属性-2" class="headerlink" title="属性"></a>属性</h3><table>
<thead>
<tr>
<th>属性名</th>
<th>含义</th>
<th>类型</th>
<th>必填</th>
<th>默认值</th>
</tr>
</thead>
<tbody><tr>
<td>type</td>
<td>图标类型</td>
<td>String</td>
<td>是</td>
<td>无</td>
</tr>
</tbody></table>
<p>有效的图标类型：</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20201130155542.jpg" alt="iShot2020-11-30下午03.47.09" style="zoom:33%;" />

<h2 id="3-Pager"><a href="#3-Pager" class="headerlink" title="3.Pager"></a>3.Pager</h2><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20201113130301.png" style="zoom:50%;" />

<h3 id="属性-3"><a href="#属性-3" class="headerlink" title="属性"></a>属性</h3><table>
<thead>
<tr>
<th>属性名</th>
<th>含义</th>
<th>类型</th>
<th>必填</th>
<th>默认值</th>
</tr>
</thead>
<tbody><tr>
<td>current</td>
<td>当前页码</td>
<td>Number</td>
<td>否</td>
<td>1</td>
</tr>
<tr>
<td>total</td>
<td>总数据量</td>
<td>Number</td>
<td>否</td>
<td>0</td>
</tr>
<tr>
<td>limit</td>
<td>页容量</td>
<td>Number</td>
<td>否</td>
<td>10</td>
</tr>
<tr>
<td>visibleNumber</td>
<td>可见页码数</td>
<td>Number</td>
<td>否</td>
<td>10</td>
</tr>
</tbody></table>
<h3 id="事件-1"><a href="#事件-1" class="headerlink" title="事件"></a>事件</h3><table>
<thead>
<tr>
<th>事件名</th>
<th>含义</th>
<th>事件参数</th>
<th>参数类型</th>
</tr>
</thead>
<tbody><tr>
<td>pageChange</td>
<td>页码变化</td>
<td>新的页码</td>
<td>Number</td>
</tr>
</tbody></table>
<h2 id="4-Empty"><a href="#4-Empty" class="headerlink" title="4.Empty"></a>4.Empty</h2><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20201130165011.png" alt="image-20201130165011681" style="zoom:50%;" />

<p>该组件需要在外层容器中横向垂直居中</p>
<h3 id="属性-4"><a href="#属性-4" class="headerlink" title="属性"></a>属性</h3><table>
<thead>
<tr>
<th>属性名</th>
<th>含义</th>
<th>类型</th>
<th>必填</th>
<th>默认值</th>
</tr>
</thead>
<tbody><tr>
<td>text</td>
<td>显示的文字</td>
<td>String</td>
<td>否</td>
<td>“无数据”</td>
</tr>
</tbody></table>
<h2 id="5-ImageLoader"><a href="#5-ImageLoader" class="headerlink" title="5.ImageLoader"></a>5.ImageLoader</h2><p>该组件可以实现一个渐进式图片</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20201115132049.gif" alt="alt tag"></p>
<h3 id="属性-5"><a href="#属性-5" class="headerlink" title="属性"></a>属性</h3><table>
<thead>
<tr>
<th>属性名</th>
<th>含义</th>
<th>类型</th>
<th>必填</th>
<th>默认值</th>
</tr>
</thead>
<tbody><tr>
<td>src</td>
<td>原始图片的路径</td>
<td>String</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>placeholder</td>
<td>原始图片加载完成前的占位图片</td>
<td>String</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>duration</td>
<td>原始图片加载完成后，切换到原始图经过的毫秒数</td>
<td>Number</td>
<td>否</td>
<td>500</td>
</tr>
</tbody></table>
<h3 id="事件-2"><a href="#事件-2" class="headerlink" title="事件"></a>事件</h3><table>
<thead>
<tr>
<th>事件名</th>
<th>含义</th>
<th>事件参数</th>
<th>参数类型</th>
</tr>
</thead>
<tbody><tr>
<td>load</td>
<td>原始图片加载完成后触发</td>
<td>无</td>
<td>无</td>
</tr>
</tbody></table>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ImageLoader</span> </span></span><br><span class="line"><span class="tag">	<span class="attr">src</span>=<span class="string">&quot;https://images.pexels.com/photos/33109/fall-autumn-red-season.jpg?fit=crop&amp;crop=entropy&amp;w=3456&amp;h=2304&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">placeholder</span>=<span class="string">&quot;https://images.pexels.com/photos/33109/fall-autumn-red-season.jpg?w=100&quot;</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="6-Contact"><a href="#6-Contact" class="headerlink" title="6.Contact"></a>6.Contact</h2><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20201130165641.gif" alt="iShot2020-11-30下午04.55.47" style="zoom:40%;" />

<p>该组件需要横向撑满容器，背景色透明</p>
<blockquote>
<ol>
<li><p>如何实现点击弹出QQ对话？</p>
<p>设置超链接为：tencent:&#x2F;&#x2F;message&#x2F;?Menu&#x3D;yes&amp;uin&#x3D;要对话的QQ号&amp;Service&#x3D;300&amp;sigT&#x3D;45a1e5847943b64c6ff3990f8a9e644d2b31356cb0b4ac6b24663a3c8dd0f8aa12a595b1714f9d45</p>
</li>
<li><p>如何实现点击弹出发送邮件？</p>
<p>设置超链接为：mailto:邮件地址</p>
</li>
</ol>
</blockquote>
<h2 id="7-Menu"><a href="#7-Menu" class="headerlink" title="7.Menu"></a>7.Menu</h2><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20201130195147.png" alt="image-20201130195147086" style="zoom:33%;" />

<p>该组件需要横向撑满容器，背景色透明</p>
<p>每个菜单的信息如下：</p>
<blockquote>
<p><strong>首页</strong></p>
<p>链接地址：&#x2F;</p>
<p>选中条件：路径等于 &#x2F;</p>
<p><strong>文章</strong></p>
<p>链接地址：&#x2F;blog</p>
<p>选中条件：路径以<code>/blog</code>开头</p>
<p><strong>关于我</strong></p>
<p>链接地址：&#x2F;about</p>
<p>选中条件：路径等于<code>/about</code></p>
<p><strong>项目&amp;效果</strong></p>
<p>链接地址：&#x2F;project</p>
<p>选中条件：路径等于<code>/project</code></p>
<p><strong>留言板</strong></p>
<p>链接地址：&#x2F;message</p>
<p>选中条件：路径等于<code>/message</code></p>
</blockquote>
<h2 id="8-SiteAside"><a href="#8-SiteAside" class="headerlink" title="8.SiteAside"></a>8.SiteAside</h2><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20201130200148.png" alt="image-20201130200148681" style="zoom:33%;" />

<p>网站侧边栏</p>
<p>宽度和高度撑满外层容器</p>
<h1 id="十、插槽"><a href="#十、插槽" class="headerlink" title="十、插槽"></a>十、插槽</h1><p>在某些组件的模板中，有一部分区域需要父组件来指定</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- message组件：一个弹窗消息 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;message-container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 这里是消息内容，可以是一个文本，也可能是一段html，具体是什么不知道，需要父组件指定 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span>&gt;</span>确定<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span>&gt;</span>关闭<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="1-插槽的简单用法"><a href="#1-插槽的简单用法" class="headerlink" title="1.插槽的简单用法"></a>1.插槽的简单用法</h2><p>此时，就需要使用插槽来定制组件的功能</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- message组件：一个弹窗消息 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;message-container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- slot是vue的内置组件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span>&gt;</span>确定<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span>&gt;</span>关闭<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 父组件App --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Message</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app-message&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>App Message<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>detail<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Message</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 最终的结果 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;message-container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app-message&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>App Message<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>detail<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span>&gt;</span>确定<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span>&gt;</span>关闭<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20201202152326.png" alt="image-20201202152326210" style="zoom:40%;" />

<h2 id="2-具名插槽"><a href="#2-具名插槽" class="headerlink" title="2.具名插槽"></a>2.具名插槽</h2><p>如果某个组件中需要父元素传递多个区域的内容，也就意味着需要提供多个插槽</p>
<p>为了避免冲突，就需要给不同的插槽赋予不同的名字</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Layout 组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layout-container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 我们希望把页头放这里，提供插槽，名为header --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;header&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">main</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 我们希望把主要内容放这里，提供插槽，名为default --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 我们希望把页脚放这里，提供插槽，名为footer --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;footer&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 父组件App --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">BaseLayout</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Here might be a page title<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:default</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>A paragraph for the main content.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>And another one.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:default</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> #<span class="attr">footer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Here&#x27;s some contact info<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">BaseLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20201202153229.png" alt="image-20201202153229391" style="zoom:50%;" />

<h1 id="十一、路由"><a href="#十一、路由" class="headerlink" title="十一、路由"></a>十一、路由</h1><blockquote>
<p>vue-router 官网：<a target="_blank" rel="noopener" href="https://router.vuejs.org/zh/">https://router.vuejs.org/zh/</a></p>
</blockquote>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20201202170037.png" alt="image-20201202170037391" style="zoom:50%;" />

<ol>
<li><strong>如何根据地址中的路径选择不同的组件？</strong></li>
<li><strong>把选择的组件放到哪个位置？</strong></li>
<li><strong>如何无刷新的切换组件？</strong></li>
</ol>
<h2 id="1-路由插件"><a href="#1-路由插件" class="headerlink" title="1.路由插件"></a>1.路由插件</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">为了保证和课程一致，请安装3.4.9版本</span></span><br><span class="line">npm i vue-router@3.4.9</span><br></pre></td></tr></table></figure>

<p>路由插件的使用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>); <span class="comment">// Vue.use(插件)  在Vue中安装插件</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="comment">// 路由配置</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  ...,</span><br><span class="line">  router</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="2-基本使用"><a href="#2-基本使用" class="headerlink" title="2.基本使用"></a>2.基本使用</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 路由配置</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    <span class="comment">// 路由规则</span></span><br><span class="line">    <span class="comment">// 当匹配到路径 /foo 时，渲染 Foo 组件</span></span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/foo&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Foo</span> &#125;,</span><br><span class="line">    <span class="comment">// 当匹配到路径 /bar 时，渲染 Bar 组件</span></span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/bar&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Bar</span> &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- App.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 公共区域 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 页面区域 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- vue-router 匹配到的组件会渲染到这里 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">RouterView</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="3-路由模式"><a href="#3-路由模式" class="headerlink" title="3.路由模式"></a>3.路由模式</h2><p>路由模式决定了：</p>
<ol>
<li>路由从哪里获取访问路径</li>
<li>路由如何改变访问路径</li>
</ol>
<p><code>vue-router</code>提供了三种路由模式：</p>
<ol>
<li><p>hash：默认值。路由从浏览器地址栏中的 hash 部分获取路径，改变路径也是改变的 hash 部分。该模式兼容性最好。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8081/#/blog  --&gt;  /blog</span><br><span class="line">http://localhost:8081/about#/blog  --&gt; /blog</span><br></pre></td></tr></table></figure>
</li>
<li><p>history：路由从浏览器地址栏的<code>location.pathname</code>中获取路径，改变路径使用的 H5 的<code>history api</code>。该模式可以让地址栏最友好，但是需要浏览器支持<code>history api</code>。<code>vue-router</code>的<code>history</code>模式就是用了该<code>api</code>，先阻止<code>a</code>标签的默认行为，然后用该<code>api</code>改变路径</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8081/#/blog  --&gt;  /</span><br><span class="line">http://localhost:8081/about#/blog  --&gt; /about</span><br><span class="line">http://localhost:8081/blog  --&gt; /blog</span><br></pre></td></tr></table></figure>
</li>
<li><p>abstract：路由从内存中获取路径，改变路径也只是改动内存中的值。这种模式通常应用到非浏览器环境中。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">内存： /			--&gt;   /</span><br><span class="line">内存： /about	--&gt; /about</span><br><span class="line">内存： /blog	  --&gt; /blog</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="4-导航"><a href="#4-导航" class="headerlink" title="4.导航"></a>4.导航</h2><p><code>vue-router</code>提供了全局的组件<code>RouterLink</code>，它的渲染结果是一个<code>a</code>元素</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">RouterLink</span> <span class="attr">to</span>=<span class="string">&quot;/blog&quot;</span>&gt;</span>文章<span class="tag">&lt;/<span class="name">RouterLink</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- mode:hash 生成 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#/blog&quot;</span>&gt;</span>文章<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- mode:history 生成 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 为了避免刷新页面，vue-router实际上为它添加了点击事件，并阻止了默认行为，在事件内部使用hitory api更改路径 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/blog&quot;</span>&gt;</span>文章<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20201203150453.png" alt="image-20201203150453332" />

<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20201203150918.png" alt="image-20201203150918219" style="zoom:50%;" />

<h3 id="激活状态"><a href="#激活状态" class="headerlink" title="激活状态"></a>激活状态</h3><p>默认情况下，<code>vue-router</code>会用 <strong>当前路径</strong> 匹配 <strong>导航路径</strong> ：</p>
<ul>
<li>如果当前路径是以导航路径开头，则算作匹配，会为导航的 a 元素添加类名<code>router-link-active</code></li>
<li>如果当前路径完全等于导航路径，则算作精确匹配，会为导航的 a 元素添加类名<code>router-link-exact-active</code></li>
</ul>
<p>例如，当前访问的路径是<code>/blog</code>，则：</p>
<table>
<thead>
<tr>
<th>导航路径</th>
<th>类名</th>
</tr>
</thead>
<tbody><tr>
<td>&#x2F;</td>
<td>router-link-active</td>
</tr>
<tr>
<td>&#x2F;blog</td>
<td>router-link-active router-link-exact-active</td>
</tr>
<tr>
<td>&#x2F;about</td>
<td>无</td>
</tr>
<tr>
<td>&#x2F;message</td>
<td>无</td>
</tr>
</tbody></table>
<p>可以为组件<code>RouterLink</code>添加 bool 属性<code>exact</code>，将匹配规则改为：必须要精确匹配才能添加匹配类名<code>router-link-active</code></p>
<p>例如，当前访问的路径是<code>/blog</code>，则：</p>
<table>
<thead>
<tr>
<th>导航路径</th>
<th>exact</th>
<th>类名</th>
</tr>
</thead>
<tbody><tr>
<td>&#x2F;</td>
<td>true</td>
<td>无</td>
</tr>
<tr>
<td>&#x2F;blog</td>
<td>false</td>
<td>router-link-active router-link-exact-active</td>
</tr>
<tr>
<td>&#x2F;about</td>
<td>true</td>
<td>无</td>
</tr>
<tr>
<td>&#x2F;message</td>
<td>true</td>
<td>无</td>
</tr>
</tbody></table>
<p>例如，当前访问的路径是<code>/blog/detail/123</code>，则：</p>
<table>
<thead>
<tr>
<th>导航路径</th>
<th>exact</th>
<th>类名</th>
</tr>
</thead>
<tbody><tr>
<td>&#x2F;</td>
<td>true</td>
<td>无</td>
</tr>
<tr>
<td>&#x2F;blog</td>
<td>false</td>
<td>router-link-active</td>
</tr>
<tr>
<td>&#x2F;about</td>
<td>true</td>
<td>无</td>
</tr>
<tr>
<td>&#x2F;message</td>
<td>true</td>
<td>无</td>
</tr>
</tbody></table>
<p>另外，可以通过<code>active-class</code>属性更改匹配的类名，通过<code>exact-active-class</code>更改精确匹配的类名</p>
<h2 id="5-命名路由"><a href="#5-命名路由" class="headerlink" title="5.命名路由"></a>5.命名路由</h2><p>使用命名路由可以解除系统与路径之间的耦合，防止如果改某个路由的路径，要多处修改</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 路由配置</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    <span class="comment">// 路由规则</span></span><br><span class="line">    <span class="comment">// 当匹配到路径 /foo 时，渲染 Foo 组件</span></span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;foo&#x27;</span>, <span class="attr">path</span>: <span class="string">&#x27;/foo&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Foo</span> &#125;,</span><br><span class="line">    <span class="comment">// 当匹配到路径 /bar 时，渲染 Bar 组件</span></span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;bar&#x27;</span>, <span class="attr">path</span>: <span class="string">&#x27;/bar&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Bar</span> &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 向to属性传递路由信息对象 RouterLink会根据你传递的信息以及路由配置生成对应的路径 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">RouterLink</span> <span class="attr">:to</span>=<span class="string">&quot;&#123; name:&#x27;foo&#x27; &#125;&quot;</span>&gt;</span>go to foo<span class="tag">&lt;/<span class="name">RouterLink</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="十二、弹出消息▲"><a href="#十二、弹出消息▲" class="headerlink" title="十二、弹出消息▲"></a>十二、弹出消息▲</h1><h2 id="1-使用css-module"><a href="#1-使用css-module" class="headerlink" title="1.使用css module"></a>1.使用css module</h2><p>在vue中想使用css module，需要将样式文件命名为<code>xxx.module.ooo</code></p>
<p><code>xxx</code>为文件名</p>
<p><code>ooo</code>为样式文件后缀名，可以是<code>css</code>、<code>less</code></p>
<h2 id="2-得到组件渲染的Dom"><a href="#2-得到组件渲染的Dom" class="headerlink" title="2.得到组件渲染的Dom"></a>2.得到组件渲染的Dom</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    获取某个组件渲染的Dom根元素</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Icon</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/Icon&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Icon</span>) <span class="comment">// 会打印出来一个vue实例对象</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getComponentRootDom</span>(<span class="params">comp, props</span>)&#123;</span><br><span class="line">  <span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(comp, &#123;props&#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  vm.$mount();</span><br><span class="line">  <span class="keyword">return</span> vm.<span class="property">$el</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getComponentRootDom</span>(<span class="title class_">Icon</span>)) <span class="comment">// 打印真实dom</span></span><br></pre></td></tr></table></figure>



<h2 id="3-扩展vue实例"><a href="#3-扩展vue实例" class="headerlink" title="3.扩展vue实例"></a>3.扩展vue实例</h2><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20201203172154.jpg" alt="扩展vue实例" style="zoom:33%;" />

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$sayHello</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-ref"><a href="#4-ref" class="headerlink" title="4.ref"></a>4.ref</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">ref</span>=<span class="string">&quot;para&quot;</span>&gt;</span>some paragraph<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ChildComp</span> <span class="attr">ref</span>=<span class="string">&quot;comp&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;handleClick&quot;</span>&gt;</span>查看所有引用<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> <span class="title class_">ChildComp</span> <span class="keyword">from</span> <span class="string">&quot;./ChildComp&quot;</span></span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">components</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title class_">ChildComp</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">handleClick</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 获取持有的所有引用</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$refs</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">/*</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        	para: p元素（原生DOM）,</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        	comp: ChildComp的组件实例</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        &#125;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        */</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>



<blockquote>
<p>通过<code>ref</code>可以直接操作<code>dom</code>元素，甚至可能直接改动子组件，这些都不符合<code>vue</code>的设计理念。</p>
<p>除非迫不得已，否则不要使用<code>ref</code></p>
</blockquote>
<h2 id="5、全局通用showMessage"><a href="#5、全局通用showMessage" class="headerlink" title="5、全局通用showMessage"></a>5、全局通用showMessage</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> getComponentRootDom <span class="keyword">from</span> <span class="string">&quot;./getComponentRootDom&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Icon</span> <span class="keyword">from</span> <span class="string">&quot;@/components/Icon&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&quot;./showMessage.module.less&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 弹出消息</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">String</span>&#125; content 消息内容</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">String</span>&#125; type 消息类型  info  error  success  warn</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Number</span>&#125; duration 多久后消失</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">HTMLElement</span>&#125; container 容器，消息会显示到该容器的正中；如果不传，则显示到页面正中</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params">options = &#123;&#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> content = options.<span class="property">content</span> || <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="keyword">const</span> type = options.<span class="property">type</span> || <span class="string">&quot;info&quot;</span>;</span><br><span class="line">  <span class="keyword">const</span> duration = options.<span class="property">duration</span> || <span class="number">2000</span>;</span><br><span class="line">  <span class="keyword">const</span> container = options.<span class="property">container</span> || <span class="variable language_">document</span>.<span class="property">body</span>;</span><br><span class="line">  <span class="comment">// 创建消息元素</span></span><br><span class="line">  <span class="keyword">const</span> div = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">  <span class="comment">// 获取图标元素dom</span></span><br><span class="line">  <span class="keyword">const</span> iconDom = <span class="title function_">getComponentRootDom</span>(<span class="title class_">Icon</span>, &#123;</span><br><span class="line">    type,</span><br><span class="line">  &#125;);</span><br><span class="line">  div.<span class="property">innerHTML</span> = <span class="string">`&lt;span class=&quot;<span class="subst">$&#123;styles.icon&#125;</span>&quot;&gt;<span class="subst">$&#123;iconDom.outerHTML&#125;</span>&lt;/span&gt;&lt;div&gt;<span class="subst">$&#123;content&#125;</span>&lt;/div&gt;`</span>;</span><br><span class="line">  <span class="comment">// 设置样式</span></span><br><span class="line">  <span class="keyword">const</span> typeClassName = styles[<span class="string">`message-<span class="subst">$&#123;type&#125;</span>`</span>]; <span class="comment">//类型样式名</span></span><br><span class="line">  div.<span class="property">className</span> = <span class="string">`<span class="subst">$&#123;styles.message&#125;</span> <span class="subst">$&#123;typeClassName&#125;</span>`</span>;</span><br><span class="line">  <span class="comment">// 将div加入到容器中</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 容器的position是否改动过</span></span><br><span class="line">  <span class="keyword">if</span> (options.<span class="property">container</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">getComputedStyle</span>(container).<span class="property">position</span> === <span class="string">&quot;static&quot;</span>) &#123;</span><br><span class="line">      container.<span class="property">style</span>.<span class="property">position</span> = <span class="string">&quot;relative&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  container.<span class="title function_">appendChild</span>(div);</span><br><span class="line">  <span class="comment">// 因为浏览器渲染是异步的，要等代码执行完才会渲染，那时候透明度和 translateY 都已经改变过了，不会有动画效果，所以需要强行渲染</span></span><br><span class="line">  div.<span class="property">clientHeight</span>; <span class="comment">// 读取div.clientHeight导致reflow</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 回归到正常位置</span></span><br><span class="line">  div.<span class="property">style</span>.<span class="property">opacity</span> = <span class="number">1</span>;</span><br><span class="line">  div.<span class="property">style</span>.<span class="property">transform</span> = <span class="string">`translate(-50%, -50%)`</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 等一段时间，消失</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    div.<span class="property">style</span>.<span class="property">opacity</span> = <span class="number">0</span>;</span><br><span class="line">    div.<span class="property">style</span>.<span class="property">transform</span> = <span class="string">`translate(-50%, -50%) translateY(-25px)`</span>;</span><br><span class="line">    div.<span class="title function_">addEventListener</span>(</span><br><span class="line">      <span class="string">&quot;transitionend&quot;</span>,</span><br><span class="line">      <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        div.<span class="title function_">remove</span>();</span><br><span class="line">        <span class="comment">// 运行回调函数</span></span><br><span class="line">        options.<span class="property">callback</span> &amp;&amp; options.<span class="title function_">callback</span>();</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123; <span class="attr">once</span>: <span class="literal">true</span> &#125;</span><br><span class="line">    );</span><br><span class="line">  &#125;, duration);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>补充</strong>：方便好用的导出方式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> &#123; <span class="keyword">default</span> <span class="keyword">as</span> showMessage &#125; <span class="keyword">from</span> <span class="string">&#x27;./showMessage&#x27;</span>;</span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line"><span class="keyword">import</span> showMessage <span class="keyword">from</span> <span class="string">&#x27;./showMessage&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> showMessage;</span><br></pre></td></tr></table></figure>

<h1 id="十三、获取远程数据"><a href="#十三、获取远程数据" class="headerlink" title="十三、获取远程数据"></a>十三、获取远程数据</h1><blockquote>
<p>本节课内容和vue没有任何关系！</p>
<p>vue cli: <a target="_blank" rel="noopener" href="https://cli.vuejs.org/zh/">https://cli.vuejs.org/zh/</a></p>
<p>axios: <a target="_blank" rel="noopener" href="https://github.com/axios/axios">https://github.com/axios/axios</a></p>
<p>mockjs：<a target="_blank" rel="noopener" href="http://mockjs.com/">http://mockjs.com/</a></p>
</blockquote>
<h2 id="1-远程获取数据的意义"><a href="#1-远程获取数据的意义" class="headerlink" title="1.远程获取数据的意义"></a>1.远程获取数据的意义</h2><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20201204145137.png" alt="image-20201204145137500" style="zoom:40%;" />

<h2 id="2-开发环境有跨域问题"><a href="#2-开发环境有跨域问题" class="headerlink" title="2.开发环境有跨域问题"></a>2.开发环境有跨域问题</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">浏览器-&gt;&gt;前端开发服务器: http://localhost:8080/</span><br><span class="line">前端开发服务器-&gt;&gt;浏览器: 页面</span><br><span class="line">浏览器-&gt;&gt;后端测试服务器: ajax 跨域：http://test-data:3000/api/news</span><br><span class="line">后端测试服务器-&gt;&gt;浏览器: JSON数据</span><br><span class="line">rect rgb(224,74,74)</span><br><span class="line">Note right of 浏览器: 浏览器阻止数据移交</span><br><span class="line">end</span><br></pre></td></tr></table></figure>

<h2 id="3-生产环境没有跨域问题"><a href="#3-生产环境没有跨域问题" class="headerlink" title="3.生产环境没有跨域问题"></a>3.生产环境没有跨域问题</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">浏览器-&gt;&gt;服务器: http://www.my-site.com/</span><br><span class="line">服务器-&gt;&gt;浏览器: 页面</span><br><span class="line">浏览器-&gt;&gt;服务器: ajax：http://www.my-site.com/api/news</span><br><span class="line">服务器-&gt;&gt;浏览器: JSON数据</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">浏览器-&gt;&gt;静态资源服务器: http://www.my-site.com/</span><br><span class="line">静态资源服务器-&gt;&gt;浏览器: 页面</span><br><span class="line">浏览器-&gt;&gt;数据服务器: ajax 跨域：http://api.my-site.com/api/news</span><br><span class="line">数据服务器-&gt;&gt;浏览器: [允许www.my-site.com]JSON数据</span><br></pre></td></tr></table></figure>

<h2 id="4-解决开发环境的跨域问题"><a href="#4-解决开发环境的跨域问题" class="headerlink" title="4.解决开发环境的跨域问题"></a>4.解决开发环境的跨域问题</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">浏览器-&gt;&gt;前端开发服务器: http://localhost:8080/</span><br><span class="line">前端开发服务器-&gt;&gt;浏览器: 页面</span><br><span class="line">浏览器-&gt;&gt;前端开发服务器: ajax：http://localhost:8080/api/news</span><br><span class="line">前端开发服务器-&gt;&gt;后端测试服务器: 代理请求：http://test-data:3000/api/news</span><br><span class="line">后端测试服务器-&gt;&gt;前端开发服务器: JSON数据</span><br><span class="line">前端开发服务器-&gt;&gt;浏览器: JSON数据</span><br></pre></td></tr></table></figure>

<h2 id="5-为什么要Mock数据"><a href="#5-为什么要Mock数据" class="headerlink" title="5.为什么要Mock数据"></a>5.为什么要Mock数据</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">浏览器-&gt;&gt;前端开发服务器: http://localhost:8080/</span><br><span class="line">前端开发服务器-&gt;&gt;浏览器: 页面</span><br><span class="line">浏览器-&gt;&gt;前端开发服务器: ajax：http://localhost:8080/api/news</span><br><span class="line">前端开发服务器-&gt;&gt;后端测试服务器: 代理请求：http://test-data:3000/api/news</span><br><span class="line">后端测试服务器-&gt;&gt;前端开发服务器: 404 （后端正在开发中）</span><br><span class="line">前端开发服务器-&gt;&gt;浏览器: 404</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">participant 浏览器</span><br><span class="line">participant MockJS</span><br><span class="line">participant 前端开发服务器</span><br><span class="line">activate MockJS</span><br><span class="line">Note left of MockJS: 定义ajax拦截规则</span><br><span class="line">deactivate MockJS</span><br><span class="line">浏览器-&gt;&gt;前端开发服务器: http://localhost:8080/</span><br><span class="line">前端开发服务器-&gt;&gt;浏览器: 页面</span><br><span class="line">浏览器-&gt;&gt;MockJS: ajax：http://localhost:8080/api/news</span><br><span class="line">MockJS-&gt;&gt;浏览器: 模拟的JSON数据</span><br></pre></td></tr></table></figure>

<h2 id="6-请求拦截"><a href="#6-请求拦截" class="headerlink" title="6.请求拦截"></a>6.请求拦截</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ins = axios.<span class="title function_">create</span>(); <span class="comment">// 创建一个axios的实例</span></span><br><span class="line">ins.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(<span class="keyword">function</span>(<span class="params">resp</span>) &#123;</span><br><span class="line">  <span class="comment">// 请求拦截器处理错误信息</span></span><br><span class="line">  <span class="keyword">if</span> (resp.<span class="property">data</span>.<span class="property">code</span> !== <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="title function_">showMessage</span>(&#123;</span><br><span class="line">      <span class="attr">content</span>: resp.<span class="property">data</span>.<span class="property">msg</span>,</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&quot;error&quot;</span>,</span><br><span class="line">      <span class="attr">duration</span>: <span class="number">1500</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> resp.<span class="property">data</span>.<span class="property">data</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h1 id="十四、组件的生命周期"><a href="#十四、组件的生命周期" class="headerlink" title="十四、组件的生命周期"></a>十四、组件的生命周期</h1><h2 id="1-组件生命周期"><a href="#1-组件生命周期" class="headerlink" title="1.组件生命周期"></a>1.组件生命周期</h2><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20200908051939.png" alt="image-20200908051939745" style="zoom:50%;" />

<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20201206132819.png" alt="image-20201206132819263" style="zoom:50%;" />

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div ref=&quot;container&quot;&gt;</span><br><span class="line">    &lt;ul&gt;&lt;/ul&gt;</span><br><span class="line">    &lt;h1 ref=&quot;title&quot;&gt;&#123;&#123; count &#125;&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;button @click=&quot;count++&quot;&gt;count +1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; getBanners &#125; from &quot;@/api/banner&quot;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      banners: [],</span><br><span class="line">      count: 0,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  beforeCreate() &#123;</span><br><span class="line">    console.log(&quot;beforeCreate&quot;, this.banners); // undefined</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    console.log(&quot;created&quot;, this.banners); // vue实例对象</span><br><span class="line">  &#125;,</span><br><span class="line">  beforeMount() &#123;</span><br><span class="line">    console.log(&quot;beforeMount&quot;, this.$refs.container); // undefined</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    console.log(&quot;mounted&quot;, this.$refs.container); // dom元素</span><br><span class="line">  &#125;,</span><br><span class="line">  beforeUpdate() &#123;</span><br><span class="line">    console.log(&quot;beforeUpdate&quot;, this.$refs.title.innerText, this.count); // 修改之前的dom元素，最新数据，因为数据更新后才会重新渲染</span><br><span class="line">  &#125;,</span><br><span class="line">  updated() &#123;</span><br><span class="line">    console.log(&quot;updated&quot;, this.$refs.title.innerText, this.count); // 修改之后的dom元素，最新数据</span><br><span class="line">  &#125;,</span><br><span class="line">  beforeDestroy() &#123;</span><br><span class="line">    console.log(&quot;beforeDestroy&quot;);</span><br><span class="line">  &#125;,</span><br><span class="line">  destroyed() &#123;</span><br><span class="line">    console.log(&quot;destroyed&quot;);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h2 id="2-常见应用"><a href="#2-常见应用" class="headerlink" title="2.常见应用"></a>2.常见应用</h2><blockquote>
<p>不要死记硬背，要根据具体情况灵活处理</p>
</blockquote>
<h3 id="加载远程数据"><a href="#加载远程数据" class="headerlink" title="加载远程数据"></a>加载远程数据</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">news</span>: []</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">created</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">news</span> = <span class="keyword">await</span> <span class="title function_">getNews</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="直接操作DOM"><a href="#直接操作DOM" class="headerlink" title="直接操作DOM"></a>直接操作DOM</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">containerWidth</span>:<span class="number">0</span>,</span><br><span class="line">    	<span class="attr">containerHeight</span>:<span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">containerWidth</span> = <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">container</span>.<span class="property">clientWidth</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">containerHeight</span> = <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">container</span>.<span class="property">containerHeight</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="启动和清除计时器"><a href="#启动和清除计时器" class="headerlink" title="启动和清除计时器"></a>启动和清除计时器</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">timer</span>: <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">created</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">timer</span> = <span class="built_in">setInterval</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">     ... </span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">destroyed</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">timer</span>);               </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="十五、自定义指令"><a href="#十五、自定义指令" class="headerlink" title="十五、自定义指令"></a>十五、自定义指令</h1><h2 id="1-定义指令"><a href="#1-定义指令" class="headerlink" title="1.定义指令"></a>1.定义指令</h2><h3 id="全局定义"><a href="#全局定义" class="headerlink" title="全局定义"></a>全局定义</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 指令名称为：mydirec1</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;mydirec1&#x27;</span>, &#123;</span><br><span class="line">  <span class="comment">// 指令配置</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 指令名称为：mydirec2</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;mydirec2&#x27;</span>, &#123;</span><br><span class="line">  <span class="comment">// 指令配置</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>之后，所有的组件均可以使用<code>mydirec1</code>和<code>mydirec2</code>指令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- 某个组件代码 --&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;MyComp v-mydirec1=&quot;js表达式&quot; /&gt;</span><br><span class="line">    &lt;div v-mydirec2=&quot;js表达式&quot;&gt;</span><br><span class="line">      ...</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;img v-mydirec1=&quot;js表达式&quot; /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h3 id="局部定义"><a href="#局部定义" class="headerlink" title="局部定义"></a>局部定义</h3><p>局部定义是指在某个组件中定义指令，和局部注册组件类似。</p>
<p>定义的指令仅在该组件中有效。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- 某个组件代码 --&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;MyComp v-mydirec1=&quot;js表达式&quot; /&gt;</span><br><span class="line">    &lt;div v-mydirec2=&quot;js表达式&quot;&gt;</span><br><span class="line">      ...</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;img v-mydirec1=&quot;js表达式&quot; /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  // 定义指令</span><br><span class="line">  directives: &#123;</span><br><span class="line">    // 指令名称：mydirec1</span><br><span class="line">    mydirec1: &#123;</span><br><span class="line">      // 指令配置</span><br><span class="line">    &#125;,</span><br><span class="line">    // 指令名称：mydirec2</span><br><span class="line">    mydirec2: &#123;</span><br><span class="line">      // 指令配置</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>和局部注册组件一样，为了让指令更加通用，通常我们会把指令的配置提取到其他模块。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- 某个组件代码 --&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;MyComp v-mydirec1=&quot;js表达式&quot; /&gt;</span><br><span class="line">    &lt;div v-mydirec2=&quot;js表达式&quot;&gt;</span><br><span class="line">      ...</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;img v-mydirec1=&quot;js表达式&quot; /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  // 导入当前组件需要用到的指令配置对象</span><br><span class="line">  import mydirec1 from &quot;@/directives/mydirec1&quot;;</span><br><span class="line">  import mydirec2 from &quot;@/directives/mydirec2&quot;;</span><br><span class="line">	export default &#123;</span><br><span class="line">    // 定义指令</span><br><span class="line">    directives: &#123;</span><br><span class="line">      mydirec1,</span><br><span class="line">      mydirec2</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="2-指令配置对象"><a href="#2-指令配置对象" class="headerlink" title="2.指令配置对象"></a>2.指令配置对象</h2><p>没有配置的指令，就像没有配置的组件一样，毫无意义</p>
<p><code>vue</code>支持在指令中配置一些<strong>钩子函数</strong>，在适当的时机，<code>vue</code>会调用这些钩子函数并传入适当的参数，以便开发者完成自己想做的事情。</p>
<p>常用的钩子函数：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 指令配置对象</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="title function_">bind</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">// 只调用一次，指令第一次绑定到元素时调用。在这里可以进行一次性的初始化设置。</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">inserted</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">// 被绑定元素插入父节点时调用。</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">update</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">// 所在组件的 VNode 更新时调用</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p> <a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/custom-directive.html#%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0">查看更多的钩子函数</a></p>
</blockquote>
<p>每个钩子函数在调用时，<code>vue</code>都会向其传递一些参数，其中最重要的是前两个参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 指令配置对象</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="title function_">bind</span>(<span class="params">el, binding</span>)&#123;</span><br><span class="line">    <span class="comment">// el 是被绑定元素对应的真实DOM</span></span><br><span class="line">    <span class="comment">// binding 是一个对象，描述了指令中提供的信息</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="bingding-对象"><a href="#bingding-对象" class="headerlink" title="bingding 对象"></a>bingding 对象</h3><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20210104174229.png" alt="image-20210104174229660" style="zoom:50%;" />

<blockquote>
<p><a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/custom-directive.html#%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0">查看更多bingding对象的属性</a></p>
</blockquote>
<h2 id="3-配置简化"><a href="#3-配置简化" class="headerlink" title="3.配置简化"></a>3.配置简化</h2><p>比较多的时候，在配置自定义指令时，我们都会配置两个钩子函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="title function_">bind</span>(<span class="params">el, bingding</span>)&#123;</span><br><span class="line">    </span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">update</span>(<span class="params">el, bingding</span>)&#123;</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这样，在元素绑定和更新时，都能运行到钩子函数</p>
<p>如果这两个钩子函数实现的功能相同，可以直接把指令配置简化为一个单独的函数：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span>(<span class="params">el, bingding</span>)&#123;</span><br><span class="line">  <span class="comment">// 该函数会被同时设置到bind和update中</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<blockquote>
<p>利用上述知识，可满足大部分自定义指令的需求</p>
<p>更多的自定义指令用法见<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/custom-directive.html">官网</a></p>
</blockquote>
<h1 id="十六、组件混入"><a href="#十六、组件混入" class="headerlink" title="十六、组件混入"></a>十六、组件混入</h1><p>有的时候，许多组件有着类似的功能，这些功能代码分散在组件不同的配置中。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20210105161811.png" alt="image-20210105161811637"></p>
<p>于是，我们可以把这些配置代码抽离出来，利用<strong>混入</strong>融合到组件中。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20210105162109.png" alt="image-20210105162109015"></p>
<p>具体的做法非常简单：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 抽离的公共代码</span></span><br><span class="line"><span class="keyword">const</span> common = &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">a</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="attr">b</span>: <span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">created</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;common created&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">computed</span>:&#123;</span><br><span class="line">    <span class="title function_">sum</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">a</span> + <span class="variable language_">this</span>.<span class="property">b</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 使用comp1，将会得到：</span></span><br><span class="line"><span class="comment"> * common created</span></span><br><span class="line"><span class="comment"> * comp1 created 1 2 3</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> comp1 = &#123;</span><br><span class="line">  <span class="attr">mixins</span>: [common] <span class="comment">// 之所以是数组，是因为可以混入多个配置代码</span></span><br><span class="line">  <span class="title function_">created</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;comp1 created&quot;</span>, <span class="variable language_">this</span>.<span class="property">a</span>, <span class="variable language_">this</span>.<span class="property">b</span>, <span class="variable language_">this</span>.<span class="property">sum</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>混入并不复杂，更多细节参见<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/mixins.html">官网</a></p>
<h1 id="十七、组件递归"><a href="#十七、组件递归" class="headerlink" title="十七、组件递归"></a>十七、组件递归</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ul class=&quot;right-list-container&quot;&gt;</span><br><span class="line">    &lt;li v-for=&quot;(item, i) in list&quot; :key=&quot;i&quot;&gt;</span><br><span class="line">      &lt;span @click=&quot;handleClick(item)&quot; :class=&quot;&#123; active: item.isSelect &#125;&quot;&gt;</span><br><span class="line">        &#123;&#123; item.name &#125;&#125;</span><br><span class="line">      &lt;/span&gt;</span><br><span class="line">      &lt;span</span><br><span class="line">        v-if=&quot;item.aside&quot;</span><br><span class="line">        @click=&quot;handleClick(item)&quot;</span><br><span class="line">        class=&quot;aside&quot;</span><br><span class="line">        :class=&quot;&#123; active: item.isSelect &#125;&quot;</span><br><span class="line">      &gt;</span><br><span class="line">        &#123;&#123; item.aside &#125;&#125;</span><br><span class="line">      &lt;/span&gt;</span><br><span class="line">      &lt;!-- 显示当前组件 --&gt;</span><br><span class="line">      &lt;RightList :list=&quot;item.children&quot; @select=&quot;handleClick&quot; /&gt;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;RightList&quot;,</span><br><span class="line">  props: &#123;</span><br><span class="line">    // [ &#123;name:&quot;xxx&quot;, isSelect:true, children:[ &#123;name:&quot;yyy&quot;, isSelect: false&#125; ] &#125; ]</span><br><span class="line">    list: &#123;</span><br><span class="line">      type: Array,</span><br><span class="line">      default: () =&gt; [], // 数组和对象等要写成函数返回值</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    handleClick(item) &#123;</span><br><span class="line">      if (!item.isSelect) &#123;</span><br><span class="line">        this.$emit(&quot;select&quot;, item);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;less&quot;&gt;</span><br><span class="line">@import &quot;~@/styles/var.less&quot;;</span><br><span class="line">.right-list-container &#123;</span><br><span class="line">  list-style: none;</span><br><span class="line">  padding: 0;</span><br><span class="line">  .right-list-container &#123;</span><br><span class="line">    margin-left: 1em;</span><br><span class="line">  &#125;</span><br><span class="line">  li &#123;</span><br><span class="line">    min-height: 40px;</span><br><span class="line">    line-height: 40px;</span><br><span class="line">    font-size: 14px;</span><br><span class="line">    cursor: pointer;</span><br><span class="line">    .active &#123;</span><br><span class="line">      color: @warn;</span><br><span class="line">      font-weight: bold;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">.aside &#123;</span><br><span class="line">  font-size: 12px;</span><br><span class="line">  margin-left: 1em;</span><br><span class="line">  color: @gray;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h1 id="十八、文章列表页逻辑"><a href="#十八、文章列表页逻辑" class="headerlink" title="十八、文章列表页逻辑"></a>十八、文章列表页逻辑</h1><h2 id="1-路由跳转逻辑"><a href="#1-路由跳转逻辑" class="headerlink" title="1.路由跳转逻辑"></a>1.路由跳转逻辑</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20210107140253.png" alt="image-20210107140253824"></p>
<h2 id="2-组件逻辑"><a href="#2-组件逻辑" class="headerlink" title="2.组件逻辑"></a>2.组件逻辑</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20210107142310.png" alt="image-20210107142310757"></p>
<h3 id="BlogList"><a href="#BlogList" class="headerlink" title="BlogList"></a>BlogList</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20210107153623.png" alt="image-20210107153623557"></p>
<h3 id="BlogCategory"><a href="#BlogCategory" class="headerlink" title="BlogCategory"></a>BlogCategory</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20210107154531.png" alt="image-20210107154531659"></p>
<h2 id="3-知识"><a href="#3-知识" class="headerlink" title="3.知识"></a>3.知识</h2><h3 id="动态路由"><a href="#动态路由" class="headerlink" title="动态路由"></a>动态路由</h3><p>我们希望下面的地址都能够匹配到<code>Blog</code>组件</p>
<ul>
<li><code>/article</code>，显示全部文章</li>
<li><code>/article/cate/1</code>，显示分类<code>id</code>为<code>1</code>的文章</li>
<li><code>/article/cate/3</code>，显示分类<code>id</code>为<code>3</code>的文章</li>
<li>…</li>
</ul>
<p>第一种情况很简单，只需要将一个固定的地址匹配到<code>Blog</code>组件即可</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&quot;/article&quot;</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Blog&quot;</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="title class_">Blog</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但后面的情况则不同：匹配到<code>Blog</code>组件的地址中，有一部分是动态变化的，则需要使用一种特殊的表达方式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&quot;/article/cate/:categoryId&quot;</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;CategoryBlog&quot;</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="title class_">Blog</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在地址中使用<code>:xxx</code>，来表达这一部分的内容是变化的，在<code>vue-router</code>中，将变化的这一部分称之为<code>params</code>，可以在<code>vue</code>组件中通过<code>this.$route.params</code>来获取</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 访问 /article/cate/3</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">params</span> <span class="comment">// &#123; categoryId: &quot;3&quot; &#125;</span></span><br><span class="line"><span class="comment">// 访问 /article/cate/1</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">params</span> <span class="comment">// &#123; categoryId: &quot;1&quot; &#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="动态路由的导航"><a href="#动态路由的导航" class="headerlink" title="动态路由的导航"></a>动态路由的导航</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to=&quot;/article/cate/3&quot;&gt;to article of category 3&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">&lt;router-link :to=&quot;&#123;</span><br><span class="line">   name: &#x27;CategoryBlog&#x27;,</span><br><span class="line">   params: &#123;</span><br><span class="line">       categoryId: 3           </span><br><span class="line">   &#125;                    </span><br><span class="line">&#125;&quot;&gt;to article of category 3&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>

<h3 id="编程式导航"><a href="#编程式导航" class="headerlink" title="编程式导航"></a>编程式导航</h3><p>除了使用<code>&lt;RouterLink&gt;</code>超链接导航外，<code>vue-router</code>还允许在代码中跳转页面</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">&quot;跳转地址&quot;</span>); <span class="comment">// 普通跳转</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123; <span class="comment">// 命名路由跳转</span></span><br><span class="line">  <span class="attr">name</span>:<span class="string">&quot;Blog&quot;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">go</span>(-<span class="number">1</span>); <span class="comment">// 回退。类似于 history.go</span></span><br></pre></td></tr></table></figure>

<h3 id="watch"><a href="#watch" class="headerlink" title="watch"></a>watch</h3><p>利用<code>watch</code>配置，可以直接观察某个数据的变化，变化时可以做一些处理</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// ... 其他配置</span></span><br><span class="line">  <span class="attr">watch</span>: &#123;</span><br><span class="line">    <span class="comment">// 观察 this.$route 的变化，变化后，会调用该函数</span></span><br><span class="line">    $route(newVal, oldVal)&#123;</span><br><span class="line">      <span class="comment">// newVal：this.$route 新的值，等同 this.$route</span></span><br><span class="line">      <span class="comment">// oldVal：this.$route 旧的值</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 完整写法</span></span><br><span class="line">    <span class="attr">$route</span>: &#123;</span><br><span class="line">      <span class="title function_">handler</span>(<span class="params">newVal, oldVal</span>)&#123;&#125;,</span><br><span class="line">      <span class="attr">deep</span>: <span class="literal">false</span>, <span class="comment">// 是否监听该数据内部属性的变化，默认 false</span></span><br><span class="line">      <span class="attr">immediate</span>: <span class="literal">false</span> <span class="comment">// 是否立即执行一次 handler，默认 false</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 观察 this.$route.params 的变化，变化后，会调用该函数</span></span><br><span class="line">    [<span class="string">&quot;$route.params&quot;</span>](newVal, oldVal)&#123;</span><br><span class="line">      <span class="comment">// newVal：this.$route.params 新的值，等同 this.$route.params</span></span><br><span class="line">      <span class="comment">// oldVal：this.$route.params 旧的值</span></span><br><span class="line">    &#125;,</span><br><span class="line">  	<span class="comment">// 完整写法</span></span><br><span class="line">    [<span class="string">&quot;$route.params&quot;</span>]: &#123;</span><br><span class="line">      <span class="title function_">handler</span>(<span class="params">newVal, oldVal</span>)&#123;&#125;,</span><br><span class="line">      <span class="attr">deep</span>: <span class="literal">false</span>, <span class="comment">// 是否监听该数据内部属性的变化，默认 false</span></span><br><span class="line">      <span class="attr">immediate</span>: <span class="literal">false</span> <span class="comment">// 是否立即执行一次 handler，默认 false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="十九、文章详情页"><a href="#十九、文章详情页" class="headerlink" title="十九、文章详情页"></a>十九、文章详情页</h1><h2 id="1-文章数据逻辑"><a href="#1-文章数据逻辑" class="headerlink" title="1.文章数据逻辑"></a>1.文章数据逻辑</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20210111142558.png" alt="image-20210111142558879"></p>
<h2 id="2-组件逻辑-1"><a href="#2-组件逻辑-1" class="headerlink" title="2.组件逻辑"></a>2.组件逻辑</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20210111140736.png" alt="image-20210111140735985"></p>
<h3 id="BlogDetail"><a href="#BlogDetail" class="headerlink" title="BlogDetail"></a>BlogDetail</h3><p>该组件没有任何难度，根据「属性 - 文章对象」显示出文章信息即可</p>
<p>由于文章的内容属于<strong>原始html</strong>，因此需要使用<code>v-html</code>指令来设置</p>
<p>另外，文章的内容是不带样式的，因此需要选择一款<code>markdown</code>的<code>css</code>样式（见附件<code>markdown.css</code>）</p>
<p>对于文章中脚本部分的样式，可以使用第三方库<a target="_blank" rel="noopener" href="https://highlightjs.org/">highlight.js</a>中提供的样式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;highlight.js/styles/github.css&quot;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="BlogTOC"><a href="#BlogTOC" class="headerlink" title="BlogTOC"></a>BlogTOC</h3><p>无难度，不解释</p>
<h3 id="BlogComment"><a href="#BlogComment" class="headerlink" title="BlogComment"></a>BlogComment</h3><p>下节课讲解</p>
<h1 id="二十、-listeners和v-model"><a href="#二十、-listeners和v-model" class="headerlink" title="二十、$listeners和v-model"></a>二十、$listeners和v-model</h1><h2 id="事件修饰符"><a href="#事件修饰符" class="headerlink" title="事件修饰符"></a>事件修饰符</h2><p><strong>针对<code>dom</code>节点的原生事件</strong>，<code>vue</code>支持多种修饰符以简化代码</p>
<p>详见：<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/events.html#%E4%BA%8B%E4%BB%B6%E4%BF%AE%E9%A5%B0%E7%AC%A6">事件修饰符、按键修饰符、系统修饰符</a></p>
<h2 id="listeners"><a href="#listeners" class="headerlink" title="$listeners"></a>$listeners</h2><p><code>$listeners</code>是<code>vue</code>的一个实例属性，它用于获取父组件传过来的所有事件函数</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 父组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Child</span> @<span class="attr">event1</span>=<span class="string">&quot;handleEvent1&quot;</span> @<span class="attr">event2</span>=<span class="string">&quot;handleEvent2&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 子组件</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$listeners</span> <span class="comment">// &#123; event1: handleEvent1, event2: handleEvent2 &#125;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>$emit</code>和<code>$listeners</code>通信的异同</p>
<p>相同点：均可实现子组件向父组件传递消息</p>
<p>差异点：</p>
<ul>
<li><code>$emit</code>更加符合单向数据流，子组件仅发出通知，由父组件监听做出改变；而<code>$listeners</code>则是在子组件中直接使用了父组件的方法。</li>
<li>调试工具可以监听到子组件<code>$emit</code>的事件，但无法监听到<code>$listeners</code>中的方法调用。（想想为什么）</li>
<li>由于<code>$listeners</code>中可以获得传递过来的方法，因此调用方法可以得到其返回值。但<code>$emit</code>仅仅是向父组件发出通知，无法知晓父组件处理的结果</li>
</ul>
</blockquote>
<blockquote>
<p>对于上述中的第三点，可以在<code>$emit</code>中传递回调函数来解决</p>
<p>父组件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;Child @click=&quot;handleClick&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Child from &quot;./Child&quot;</span><br><span class="line">	export default &#123;</span><br><span class="line"> components:&#123;</span><br><span class="line">   Child</span><br><span class="line"> &#125;,</span><br><span class="line"> methods:&#123;</span><br><span class="line">   handleClick(data, callback)&#123;</span><br><span class="line">     console.log(data); // 得到子组件事件中的数据</span><br><span class="line">     setTimeout(()=&gt;&#123;</span><br><span class="line">       callback(1); // 一段时间后，调用子组件传递的回调函数</span><br><span class="line">     &#125;, 3000)</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>子组件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;button @click=&quot;handleClick&quot;&gt;</span><br><span class="line"> click</span><br><span class="line">&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">	export default &#123;</span><br><span class="line"> methods:&#123;</span><br><span class="line">   handleClick()&#123;</span><br><span class="line">     this.$emit(&quot;click&quot;, 123, (data)=&gt;&#123;</span><br><span class="line">       console.log(data); // data为父组件处理完成后得到的数据</span><br><span class="line">     &#125;)</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="v-model"><a href="#v-model" class="headerlink" title="v-model"></a>v-model</h2><p><code>v-model</code>指令实质是一个语法糖，它是<code>value</code>属性和<code>input</code>事件的<em>结合体</em></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">:value</span>=<span class="string">&quot;data&quot;</span> @<span class="attr">input</span>=<span class="string">&quot;data=$event.target.value&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 等同于 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;data&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 选择框 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&#x27;radio&#x27;</span> <span class="attr">v-model</span>=<span class="string">&quot;data&quot;</span> <span class="attr">value</span>=<span class="string">&#x27;male&#x27;</span> /&gt;</span> // 如果data === &#x27;male&#x27; 则选中</span><br></pre></td></tr></table></figure>

<p>详见：[表单输入绑定](<a target="_blank" rel="noopener" href="https://v2.cn.vuejs.org/v2/guide/forms.html">表单输入绑定 — Vue.js</a>)</p>
<h2 id="v-on"><a href="#v-on" class="headerlink" title="v-on"></a>v-on</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@submit = <span class="string">&#x27;handleSubmit&#x27;</span></span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line">v-<span class="attr">on</span>:submit = <span class="string">&#x27;handleSubmit&#x27;</span></span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line">v-on=<span class="string">&#x27;&#123;submit:handleSubmit&#125;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>组件封装如果嵌套过多，导致方法传递过多时可以通过<code>v-on</code>和<code>$listeners</code>来实现高级用法</p>
<p>将方法<code>@submit</code>按照C-&gt;B-&gt;A链路传递，最后在<code>A</code>进行处理，我们可以在B中写<code>v-on=&#39;$listeners&#39;</code></p>
<h1 id="二十一、事件总线"><a href="#二十一、事件总线" class="headerlink" title="二十一、事件总线"></a>二十一、事件总线</h1><p>该通信方式主要是为了处理跨层级通信，不一定非要是父子通信</p>
<p>事件总线四个要点</p>
<ol>
<li>提供监听某事件的接口</li>
<li>提供取消监听的接口</li>
<li>触发事件的接口（可传递数据）</li>
<li>触发事件后会自动通知监听者</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 手写事件总线</span></span><br><span class="line"><span class="keyword">const</span> listeners = &#123;&#125;;<span class="comment">// &#123;&#x27;event1&#x27;:[handler1,handler2],&#x27;event2&#x27;:[handler1,handler2]&#125;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    $on(eventName, handler) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!listeners[eventName]) &#123;</span><br><span class="line">            listeners[eventName] = <span class="keyword">new</span> <span class="title class_">Set</span>();</span><br><span class="line">            listeners[eventName].<span class="title function_">add</span>(handler);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    $off(eventName, handler) &#123;</span><br><span class="line">        <span class="keyword">if</span> (listeners[eventName]) &#123;</span><br><span class="line">            listeners[eventName].<span class="title function_">delete</span>(handler);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    $emit(eventName, ...args) &#123;</span><br><span class="line">        <span class="keyword">if</span> (listeners[eventName]) &#123;</span><br><span class="line">            listeners[eventName].<span class="title function_">forEach</span>(<span class="function"><span class="params">handler</span> =&gt;</span> <span class="title function_">handler</span>(...args));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Vue中的事件总线</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;&#125;);</span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$bus</span> = app;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> app;</span><br></pre></td></tr></table></figure>

<h1 id="二十二、图片懒加载"><a href="#二十二、图片懒加载" class="headerlink" title="二十二、图片懒加载"></a>二十二、图片懒加载</h1><p>通过自定义指令的方式实现图片懒加载，可以重点看一下</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> eventBus <span class="keyword">from</span> <span class="string">&quot;@/eventBus&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; debounce &#125; <span class="keyword">from</span> <span class="string">&quot;@/utils&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> defaultGif <span class="keyword">from</span> <span class="string">&quot;@/assets/default.gif&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> imgs = [];</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">setImage</span>(<span class="params">img</span>) &#123;</span><br><span class="line">  img.<span class="property">dom</span>.<span class="property">src</span> = defaultGif; <span class="comment">// 先暂时使用着默认图片</span></span><br><span class="line">  <span class="comment">// 处理图片</span></span><br><span class="line">  <span class="comment">// 该图片是否在视口范围内</span></span><br><span class="line">  <span class="keyword">const</span> clientHeight = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span>; <span class="comment">// 视口高度</span></span><br><span class="line">  <span class="keyword">const</span> rect = img.<span class="property">dom</span>.<span class="title function_">getBoundingClientRect</span>();</span><br><span class="line">  <span class="keyword">const</span> height = rect.<span class="property">height</span> || <span class="number">150</span>;</span><br><span class="line">  <span class="keyword">if</span> (rect.<span class="property">top</span> &gt;= -height &amp;&amp; rect.<span class="property">top</span> &lt;= clientHeight) &#123;</span><br><span class="line">    <span class="comment">// 在视口范围内</span></span><br><span class="line">    <span class="comment">// const tempImg = new Image();</span></span><br><span class="line">    <span class="comment">// tempImg.onload = function() &#123;</span></span><br><span class="line">    <span class="comment">//   // 当真实图片加载完成之后</span></span><br><span class="line">    <span class="comment">//   img.dom.src = img.src;</span></span><br><span class="line">    <span class="comment">// &#125;;</span></span><br><span class="line">    <span class="comment">// tempImg.src = img.src;</span></span><br><span class="line">    img.<span class="property">dom</span>.<span class="property">src</span> = img.<span class="property">src</span>;</span><br><span class="line">    imgs = imgs.<span class="title function_">filter</span>(<span class="function">(<span class="params">i</span>) =&gt;</span> i !== img); <span class="comment">// 处理图片后删掉</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 希望，调用该函数，就可以设置那些合适的图片</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">setImages</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> img <span class="keyword">of</span> imgs) &#123;</span><br><span class="line">    <span class="comment">// 处理该图片</span></span><br><span class="line">    <span class="title function_">setImage</span>(img);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleScroll</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">setImages</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">eventBus.$on(<span class="string">&quot;mainScroll&quot;</span>, <span class="title function_">debounce</span>(handleScroll, <span class="number">50</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">inserted</span>(<span class="params">el, bindings</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> img = &#123;</span><br><span class="line">      <span class="attr">dom</span>: el,</span><br><span class="line">      <span class="attr">src</span>: bindings.<span class="property">value</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    imgs.<span class="title function_">push</span>(img);</span><br><span class="line">    <span class="comment">// 立即处理它</span></span><br><span class="line">    <span class="title function_">setImage</span>(img);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">unbind</span>(<span class="params">el</span>) &#123;</span><br><span class="line">    imgs = imgs.<span class="title function_">filter</span>(<span class="function">(<span class="params">img</span>) =&gt;</span> img.<span class="property">dom</span> !== el);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h1 id="二十三、数据共享之Vuex"><a href="#二十三、数据共享之Vuex" class="headerlink" title="二十三、数据共享之Vuex"></a>二十三、数据共享之Vuex</h1><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20210126132906.png" alt="image-20210126132906004"></p>
<p>在<code>vue</code>中遇到<strong>共享数据</strong>，会带来下面的多个问题：</p>
<ul>
<li>如何保证数据的唯一性？<ul>
<li>如果数据不唯一，则会浪费大量的内存资源，降低运行效率</li>
<li>如果数据不唯一，就可能出现不统一的数据，难以维护</li>
</ul>
</li>
<li>某个组件改动数据后，如何让其他用到该数据的组件知道数据变化了？<ul>
<li>事件总线貌似可以解决该问题，但需要在组件中手动的维护监听，极其不方便，而且事件总线的目的在于「通知」，而不是「共享数据」</li>
</ul>
</li>
</ul>
<p>一种比较容易想到的方案，就是把所有的共享数据<strong>全部</strong>提升到根组件，然后通过属性不断下发，当某个组件需要修改数据时，又不断向上抛出事件，直到根组件完成对数据的修改。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20210126133905.png" alt="image-20210126133905451"></p>
<p>这种方案的缺陷也非常明显：</p>
<ul>
<li>需要编写大量的代码层层下发数据，很多组件被迫拥有了自己根本不需要的数据</li>
<li>需要编写大量的代码层层上抛事件，很多组件被迫注册了自己根本处理不了的事件</li>
</ul>
<p>基于上面的问题，我们可以简单的设置一个<strong>独立的数据仓库</strong>。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20210126140353.png" alt="image-20210126140353891"></p>
<ul>
<li><p>组件需要什么共享数据，可以自由的从仓库中获取，需要什么拿什么。</p>
</li>
<li><p>组件可以自由的改变仓库中的数据，仓库的数据变化后，会自动通知用到对应数据的组件更新</p>
</li>
</ul>
<p>要实现这一切，可以选择<code>vuex</code>,最好只用于大型项目</p>
<h2 id="1-创建仓库"><a href="#1-创建仓库" class="headerlink" title="1.创建仓库"></a>1.创建仓库</h2><p>先安装<code>vuex</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 为了保证和课程一致，请安装3.6.2版本</span></span><br><span class="line">npm i vuex@3.6.2</span><br></pre></td></tr></table></figure>

<p>安装<code>vuex</code>后，可以通过下面的代码创建一个数据仓库，在大部分情况下，一个工程仅需创建一个数据仓库</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>); <span class="comment">// 应用vuex插件</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  <span class="comment">// 仓库的配置</span></span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="comment">// 仓库的初始状态（数据）</span></span><br><span class="line">    <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store;</span><br></pre></td></tr></table></figure>

<p>仓库创建好后，你可以使用<code>store.state</code>来访问仓库中的数据</p>
<p>如果希望在<code>vue</code>中方便的使用仓库数据，需要将<code>vuex</code>作为插件安装</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>); <span class="comment">// 安装Vuex插件</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>(&#123;</span><br><span class="line">  <span class="comment">// 仓库的配置</span></span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="comment">// 仓库的初始状态（数据）</span></span><br><span class="line">    <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store;</span><br><span class="line"></span><br><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store.js&#x27;</span>;</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  store, <span class="comment">// 向vue中注入仓库</span></span><br><span class="line">  <span class="attr">render</span>: <span class="function">(<span class="params">h</span>) =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>之后，在<code>vue</code>组件中，可以通过实例的<code>$store</code>属性访问到仓库</p>
<p><code>Vuex</code>会自动将配置的状态数据设置为响应式数据，当数据变化时，依赖该数据的组件会自动渲染。</p>
<h2 id="2-数据的变更"><a href="#2-数据的变更" class="headerlink" title="2.数据的变更"></a>2.数据的变更</h2><p>尽管可以利用数据响应式的特点直接变更数据，但这样的做法在大型项目中会遇到问题</p>
<blockquote>
<p>如果有一天，你发现某个共享数据是错误的，而有一百多个组件都有可能变更过这块数据，你该如何知道是哪一步数据变更出现了问题？</p>
</blockquote>
<p>为了能够更好的跟踪数据的变化，<code>vuex</code>强烈建议使用<code>mutation</code>来更改数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>(&#123;</span><br><span class="line">  <span class="comment">// 仓库的配置</span></span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="comment">// 仓库的初始状态（数据）</span></span><br><span class="line">    <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 每个mutation是一个方法，它描述了数据在某种场景下的变化</span></span><br><span class="line"><span class="comment">     * increase mutation描述了数据在增加时应该发生的变化</span></span><br><span class="line"><span class="comment">     * 参数state为当前的仓库数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title function_">increase</span>(<span class="params">state</span>) &#123;</span><br><span class="line">      state.<span class="property">count</span>++;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">decrease</span>(<span class="params">state</span>) &#123;</span><br><span class="line">      state.<span class="property">count</span>--;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 求n次幂</span></span><br><span class="line"><span class="comment">     * 该mutation需要一个额外的参数来提供指数</span></span><br><span class="line"><span class="comment">     * 我们把让数据产生变化时的附加信息称之为负荷（负载） payload</span></span><br><span class="line"><span class="comment">     * payload可以是任何类型，数字、字符串、对象均可</span></span><br><span class="line"><span class="comment">     * 在该mutation中，我们约定payload为一个数字，表示指数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title function_">power</span>(<span class="params">state, payload</span>) &#123;</span><br><span class="line">      state.<span class="property">count</span> **= payload;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>当我们有了<code>mutation</code>后，就不应该直接去改动仓库的数据了</p>
<p>而是通过<code>store.commit</code>方法提交一个<code>mutation</code>，具体做法是</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">store.<span class="title function_">commit</span>(<span class="string">&#x27;mutation的名字&#x27;</span>, payload);</span><br></pre></td></tr></table></figure>

<p>现在，我们可以通过<code>vue devtools</code>观测到数据的变化了</p>
<p>**特别注意： **</p>
<ol>
<li><p><code>mutation</code>中不得出现异步操作，不然会记录不到</p>
<blockquote>
<p>在实际开发的规范中，甚至要求不得有副作用操作</p>
<p>副作用操作包括：</p>
<ul>
<li>异步</li>
<li>更改或读取外部环境的信息，例如<code>localStorage、location、DOM</code>等</li>
</ul>
</blockquote>
</li>
<li><p>提交<code>mutation</code>是数据改变的<strong>唯一原因</strong></p>
</li>
</ol>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20210129151639.png" alt="image-20210129151639301" style="zoom: 50%;" />

<h2 id="3-异步处理"><a href="#3-异步处理" class="headerlink" title="3.异步处理"></a>3.异步处理</h2><p>如果在<code>vuex</code>中要进行异步操作，需要使用<code>action</code>，然后在<code>action</code>中提交提交<code>mutation</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>(&#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="title function_">increase</span>(<span class="params">state</span>) &#123;</span><br><span class="line">      state.<span class="property">count</span>++;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">decrease</span>(<span class="params">state</span>) &#123;</span><br><span class="line">      state.<span class="property">count</span>--;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">power</span>(<span class="params">state, payload</span>) &#123;</span><br><span class="line">      state.<span class="property">count</span> **= payload;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ctx: 类似于store的对象</span></span><br><span class="line"><span class="comment">     * payload: 本次异步操作的额外信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title function_">asyncPower</span>(<span class="params">ctx, payload</span>) &#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        ctx.<span class="title function_">commit</span>(<span class="string">&#x27;power&#x27;</span>, payload);</span><br><span class="line">      &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>使用<code>action</code>中的方法时应该使用<code>dispatch</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">store.<span class="title function_">dispatch</span>(<span class="string">&#x27;asyncPower&#x27;</span>, payload);</span><br></pre></td></tr></table></figure>



<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20210129160320.png" alt="image-20210129160320025" style="zoom:50%;" />

<h1 id="二十四、简易登录"><a href="#二十四、简易登录" class="headerlink" title="二十四、简易登录"></a>二十四、简易登录</h1><h2 id="1-用户模块逻辑示意图"><a href="#1-用户模块逻辑示意图" class="headerlink" title="1.用户模块逻辑示意图"></a>1.用户模块逻辑示意图</h2><p>路由总体示意图</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20210130141626.png" alt="image-20210130141625925"></p>
<p>鉴权守卫逻辑示意图</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20210130144001.png" alt="image-20210130144001709"></p>
<h2 id="2-参考资料"><a href="#2-参考资料" class="headerlink" title="2.参考资料"></a>2.参考资料</h2><h3 id="vue"><a href="#vue" class="headerlink" title="vue"></a>vue</h3><p><a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/api/#watch">watch配置</a></p>
<p><a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/api/#vm-watch">Vue.prototype.$watch</a></p>
<h3 id="vuex"><a href="#vuex" class="headerlink" title="vuex"></a>vuex</h3><p><a target="_blank" rel="noopener" href="https://vuex.vuejs.org/zh/guide/state.html#mapstate-%E8%BE%85%E5%8A%A9%E5%87%BD%E6%95%B0">mapState</a></p>
<p><a target="_blank" rel="noopener" href="https://vuex.vuejs.org/zh/guide/getters.html">getters</a></p>
<p><a target="_blank" rel="noopener" href="https://vuex.vuejs.org/zh/guide/getters.html#mapgetters-%E8%BE%85%E5%8A%A9%E5%87%BD%E6%95%B0">mapGetters</a></p>
<p><a target="_blank" rel="noopener" href="https://vuex.vuejs.org/zh/guide/modules.html">modules</a></p>
<p><a target="_blank" rel="noopener" href="https://vuex.vuejs.org/zh/api/#watch">watch</a></p>
<h3 id="router"><a href="#router" class="headerlink" title="router"></a>router</h3><p><a target="_blank" rel="noopener" href="https://router.vuejs.org/api/#exact-path">exact-path</a></p>
<p><a target="_blank" rel="noopener" href="https://router.vuejs.org/zh/guide/advanced/navigation-guards.html#%E5%85%A8%E5%B1%80%E5%89%8D%E7%BD%AE%E5%AE%88%E5%8D%AB">导航守卫</a></p>
<h2 id="3-Demo"><a href="#3-Demo" class="headerlink" title="3.Demo"></a>3.Demo</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store/index</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> counter <span class="keyword">from</span> <span class="string">&quot;./counter&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> loginUser <span class="keyword">from</span> <span class="string">&quot;./loginUser&quot;</span>;</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  <span class="attr">modules</span>: &#123;</span><br><span class="line">    counter,</span><br><span class="line">    loginUser,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">strict</span>: <span class="literal">true</span>, <span class="comment">// 开启严格模式后，只允许通过mutation改变状态</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store;</span><br></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store/loginUser.js</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> userApi <span class="keyword">from</span> <span class="string">&quot;../api/user&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">namespaced</span>: <span class="literal">true</span>, <span class="comment">// 开启命名空间</span></span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">loading</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">user</span>: <span class="literal">null</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="title function_">status</span>(<span class="params">state</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (state.<span class="property">loading</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;loading&quot;</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (state.<span class="property">user</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;login&quot;</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;unlogin&quot;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="title function_">setLoading</span>(<span class="params">state, payload</span>) &#123;</span><br><span class="line">      state.<span class="property">loading</span> = payload;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">setUser</span>(<span class="params">state, payload</span>) &#123;</span><br><span class="line">      state.<span class="property">user</span> = payload;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">login</span>(<span class="params">ctx, payload</span>) &#123;</span><br><span class="line">      ctx.<span class="title function_">commit</span>(<span class="string">&quot;setLoading&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">      <span class="keyword">const</span> resp = <span class="keyword">await</span> userApi.<span class="title function_">login</span>(payload.<span class="property">loginId</span>, payload.<span class="property">loginPwd</span>);</span><br><span class="line">      ctx.<span class="title function_">commit</span>(<span class="string">&quot;setUser&quot;</span>, resp);</span><br><span class="line">      ctx.<span class="title function_">commit</span>(<span class="string">&quot;setLoading&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">      <span class="keyword">return</span> resp;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">whoAmI</span>(<span class="params">ctx</span>) &#123;</span><br><span class="line">      ctx.<span class="title function_">commit</span>(<span class="string">&quot;setLoading&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">      <span class="keyword">const</span> resp = <span class="keyword">await</span> userApi.<span class="title function_">whoAmI</span>();</span><br><span class="line">      ctx.<span class="title function_">commit</span>(<span class="string">&quot;setUser&quot;</span>, resp);</span><br><span class="line">      ctx.<span class="title function_">commit</span>(<span class="string">&quot;setLoading&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">loginOut</span>(<span class="params">ctx</span>) &#123;</span><br><span class="line">      ctx.<span class="title function_">commit</span>(<span class="string">&quot;setLoading&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">      <span class="keyword">await</span> userApi.<span class="title function_">loginOut</span>();</span><br><span class="line">      ctx.<span class="title function_">commit</span>(<span class="string">&quot;setUser&quot;</span>, <span class="literal">null</span>);</span><br><span class="line">      ctx.<span class="title function_">commit</span>(<span class="string">&quot;setLoading&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&#x27;loginUser/login&#x27;</span>,payLoad) <span class="comment">// 命名空间的使用</span></span><br></pre></td></tr></table></figure>

<h2 id="4-路由鉴权"><a href="#4-路由鉴权" class="headerlink" title="4.路由鉴权"></a>4.路由鉴权</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> routes <span class="keyword">from</span> <span class="string">&quot;./routes&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&quot;../store&quot;</span>;</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>);</span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  routes,</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;history&quot;</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 每当导航切换时（包含刷新页面的第一次），该函数会运行</span></span><br><span class="line">  <span class="comment">// from：之前的路由对象  (this.$route)</span></span><br><span class="line">  <span class="comment">// to: 即将进入的路由对象 (this.$route)</span></span><br><span class="line">  <span class="comment">// next: 确认导航的一个函数  调用该函数（无参），就会直接进入to， 调用该函数（传入参数），根据传入参数进入新的导航</span></span><br><span class="line">  <span class="keyword">if</span> (to.<span class="property">meta</span>.<span class="property">auth</span>) &#123;</span><br><span class="line">    <span class="comment">// 需要鉴权，进入鉴权流程</span></span><br><span class="line">    <span class="keyword">const</span> status = store.<span class="property">getters</span>[<span class="string">&quot;loginUser/status&quot;</span>];</span><br><span class="line">    <span class="keyword">if</span> (status === <span class="string">&quot;loading&quot;</span>) &#123;</span><br><span class="line">      <span class="comment">// 加载中，无法确定是否已经登录</span></span><br><span class="line">      <span class="title function_">next</span>(&#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/loading&quot;</span>,</span><br><span class="line">        <span class="attr">query</span>: &#123;</span><br><span class="line">          <span class="attr">returnurl</span>: to.<span class="property">fullPath</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (status === <span class="string">&quot;login&quot;</span>) &#123;</span><br><span class="line">      <span class="comment">// 登录过了</span></span><br><span class="line">      <span class="title function_">next</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 未登录</span></span><br><span class="line">      <span class="title function_">alert</span>(<span class="string">&quot;该页面需要登录，你还没有登录，请先登录&quot;</span>);</span><br><span class="line">      <span class="title function_">next</span>(&#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/login&quot;</span>,</span><br><span class="line">        <span class="attr">query</span>: &#123;</span><br><span class="line">          <span class="attr">returnurl</span>: to.<span class="property">fullPath</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_">next</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></table></figure>

<h1 id="二十五、打包结果分析"><a href="#二十五、打包结果分析" class="headerlink" title="二十五、打包结果分析"></a>二十五、打包结果分析</h1><h2 id="1-分析打包结果"><a href="#1-分析打包结果" class="headerlink" title="1.分析打包结果"></a>1.分析打包结果</h2><p>由于<code>vue-cli</code>是利用<code>webpack</code>进行打包，我们仅需加入一个<code>webpack</code>插件<code>webpack-bundle-analyzer</code>即可分析打包结果</p>
<p>为了避免在开发环境中启动<code>webpack-bundle-analyzer</code>，我们仅需使用以下代码即可</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">BundleAnalyzerPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;webpack-bundle-analyzer&quot;</span>)</span><br><span class="line">    .<span class="property">BundleAnalyzerPlugin</span>;</span><br><span class="line"><span class="comment">// vue.config.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 通过 configureWebpack 选项，可对 webpack 进行额外的配置</span></span><br><span class="line">  <span class="comment">// 该配置最终会和 vue-cli 的默认配置进行合并（webpack-merge）</span></span><br><span class="line">  <span class="attr">configureWebpack</span>: &#123;</span><br><span class="line">    <span class="attr">plugins</span>: [<span class="keyword">new</span> <span class="title class_">BundleAnalyzerPlugin</span>()]</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>补充：</strong>分环境进行打包</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="keyword">if</span>(process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&#x27;production&#x27;</span>)&#123;</span><br><span class="line">	<span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    	<span class="attr">plugins</span>: [<span class="keyword">new</span> <span class="title class_">BundleAnalyzerPlugin</span>()]</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">	<span class="variable language_">module</span>.<span class="property">exports</span> = &#123;&#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// webpack 本身在处理配置文件时，是基于 CommonJS 模块规范来进行的。它期望配置文件按照 CommonJS 的方式来组织代码，通过 module.exports 来导出一个包含各种配置选项的对象。不支持ES Modules</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue.config.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 通过 configureWebpack 选项，可对 webpack 进行额外的配置</span></span><br><span class="line">  <span class="comment">// 该配置最终会和 vue-cli 的默认配置进行合并（webpack-merge）</span></span><br><span class="line">  <span class="attr">configureWebpack</span>: <span class="built_in">require</span>(<span class="string">&quot;./webpack.config&quot;</span>)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="2-优化公共库打包体积"><a href="#2-优化公共库打包体积" class="headerlink" title="2.优化公共库打包体积"></a>2.优化公共库打包体积</h2><h3 id="使用CDN"><a href="#使用CDN" class="headerlink" title="使用CDN"></a>使用CDN</h3><p>CDN全称为Content Delivery Network，称之为内容分发网络</p>
<p>它的基本原理是：架设多台服务器，这些服务器定期从源站拿取资源保存本地，到让不同地域的用户能够通过访问最近的服务器获得资源</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20210203133956.png" alt="img"></p>
<p>我们可以把项目中的所有静态资源(打包完成的)都放到CDN上（收费），也可以利用现成免费的CDN获取公共库的资源</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://mdrs.yuanjin.tech/img/20210203140030.png" alt="image-20210203140029967" style="zoom:50%;" />

<p>首先，我们需要告诉<code>webpack</code>不要对公共库进行打包</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue.config.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">configureWebpack</span>: &#123;</span><br><span class="line">    <span class="attr">externals</span>: &#123;</span><br><span class="line">      <span class="attr">vue</span>: <span class="string">&quot;Vue&quot;</span>,</span><br><span class="line">      <span class="attr">vuex</span>: <span class="string">&quot;Vuex&quot;</span>,</span><br><span class="line">      <span class="string">&quot;vue-router&quot;</span>: <span class="string">&quot;VueRouter&quot;</span>,</span><br><span class="line">      <span class="attr">axios</span>: <span class="string">&#x27;axios&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>然后，在页面中手动加入<code>cdn</code>链接，这里使用<a target="_blank" rel="noopener" href="https://www.bootcdn.cn/">bootcn</a></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// index.html,只有打包后需要这样引入，开发环境不需要，可以使用模板代码来处理</span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  &lt;% if(NODE_ENV === &#x27;production&#x27;) &#123; %&gt;</span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/vue/2.6.12/vue.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/vuex/3.5.1/vuex.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/vue-router/3.4.7/vue-router.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  &lt;% &#125; %&gt;</span><br><span class="line">  <span class="comment">&lt;!-- built files will be auto injected --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>对于<code>vuex</code>和<code>vue-router</code>，使用这种传统的方式引入的话会自动成为<code>Vue</code>的插件，因此需要去掉<code>Vue.use(xxx)</code></p>
<p>我们可以使用下面的代码来进行兼容</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(!<span class="variable language_">window</span>.<span class="property">Vuex</span>)&#123;</span><br><span class="line">  <span class="comment">// 没有使用传统的方式引入Vuex</span></span><br><span class="line">  <span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// router.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(!<span class="variable language_">window</span>.<span class="property">VueRouter</span>)&#123;</span><br><span class="line">  <span class="comment">// 没有使用传统的方式引入VueRouter</span></span><br><span class="line">  <span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="启用现代模式"><a href="#启用现代模式" class="headerlink" title="启用现代模式"></a>启用现代模式</h3><p>为了兼容各种浏览器，<code>vue-cli</code>在内部使用了<code>@babel/present-env</code>对代码进行降级，你可以通过<code>.browserlistrc</code>配置来设置需要兼容的目标浏览器</p>
<p>这是一种比较<em>偷懒</em>的办法，因为对于那些使用现代浏览器的用户，它们也<em>被迫</em>使用了降级之后的代码，而降低的代码中包含了大量的<code>polyfill</code>，从而提升了包的体积</p>
<p>因此，我们希望提供两种打包结果：</p>
<ol>
<li>降级后的包（大），提供给旧浏览器用户使用</li>
<li>未降级的包（小），提供给现代浏览器用户使用</li>
</ol>
<p>除了应用<code>webpack</code>进行多次打包外，还可以利用<code>vue-cli</code>给我们提供的命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue-cli-service build --modern # 针对现代浏览器和旧浏览器提供两个打包结果</span><br></pre></td></tr></table></figure>



<h2 id="3-优化项目包体积"><a href="#3-优化项目包体积" class="headerlink" title="3.优化项目包体积"></a>3.优化项目包体积</h2><p>这里的项目包是指<code>src</code>目录中的打包结果</p>
<h3 id="页面分包"><a href="#页面分包" class="headerlink" title="页面分包"></a>页面分包</h3><p>默认情况下，<code>vue-cli</code>会利用<code>webpack</code>将<code>src</code>目录中的所有代码打包成一个<code>bundle</code></p>
<p>这样就导致访问一个页面时，需要加载所有页面的<code>js</code>代码</p>
<p>我们可以利用<code>webpack</code>对<code>动态import</code>的支持，从而达到把不同页面的代码打包到不同文件中</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// routes</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;Home&quot;</span>,</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="comment">/* webpackChunkName: &quot;home&quot; */</span> <span class="string">&quot;@/views/Home&quot;</span>),</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;About&quot;</span>,</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/about&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="comment">/* webpackChunkName: &quot;about&quot; */</span><span class="string">&quot;@/views/About&quot;</span>),</span><br><span class="line">  &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<h2 id="4-优化首屏响应"><a href="#4-优化首屏响应" class="headerlink" title="4.优化首屏响应"></a>4.优化首屏响应</h2><blockquote>
<p>首页白屏受很多因素的影响</p>
</blockquote>
<p><code>vue</code>页面需要通过<code>js</code>构建，因此在<code>js</code>下载到本地之前，页面上什么也没有</p>
<p>一个非常简单有效的办法，即在页面中先渲染一个小的加载中效果，等到<code>js</code>下载到本地并运行后，即会自动替换</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;loading.gif&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>补充</strong>：静态资源</p>
<p><code>static:</code>纯静态资源，原封不动的到输出目录</p>
<p><code>assets:</code>会参与打包</p>
<h1 id="二十六、异步组件"><a href="#二十六、异步组件" class="headerlink" title="二十六、异步组件"></a>二十六、异步组件</h1><h2 id="1-异步组件"><a href="#1-异步组件" class="headerlink" title="1.异步组件"></a>1.异步组件</h2><p>在代码层面，<code>vue</code>组件本质上是一个配置对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> comp = &#123;</span><br><span class="line">  <span class="attr">props</span>: xxx,</span><br><span class="line">  <span class="attr">data</span>: xxx,</span><br><span class="line">  <span class="attr">computed</span>: xxx,</span><br><span class="line">  <span class="attr">methods</span>: xxx</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但有的时候，要得到某个组件配置对象需要一个异步的加载过程，比如：</p>
<ul>
<li>需要使用ajax获得某个数据之后才能加载该组件</li>
<li>为了合理的分包，组件配置对象需要通过<code>import(xxx)</code>动态加载</li>
</ul>
<p>如果一个组件<strong>需要通过异步的方式得到组件配置对象</strong>，该组件可以把它做成一个异步组件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 异步组件本质上是一个函数</span></span><br><span class="line"><span class="comment"> * 该函数调用后返回一个Promise，Promise成功的结果是一个组件配置对象</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">AsyncComponent</span> = (<span class="params"></span>) =&gt; <span class="keyword">import</span>(<span class="string">&quot;./MyComp&quot;</span>)</span><br><span class="line"><span class="comment">// 可看成</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">MyComp</span> <span class="keyword">from</span> <span class="string">&#x27;./MyComp&#x27;</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">AsyncComponent</span> = (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="title function_">resolve</span>(<span class="title class_">MyComp</span>)</span><br><span class="line">        &#125;,<span class="number">3000</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> <span class="title class_">App</span> = &#123;</span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 你可以把该函数当做一个组件使用（异步组件）</span></span><br><span class="line"><span class="comment">     * Vue会调用该函数，并等待Promise完成，完成之前该组件位置什么也不渲染</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title class_">AsyncComponent</span> </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>异步组件的函数不仅可以返回一个Promise，还支持返回一个对象</p>
<p>详见：<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/components-dynamic-async.html#%E5%A4%84%E7%90%86%E5%8A%A0%E8%BD%BD%E7%8A%B6%E6%80%81">返回对象格式的异步组件</a></p>
</blockquote>
<h2 id="2-应用"><a href="#2-应用" class="headerlink" title="2.应用"></a>2.应用</h2><p>异步组件通常应用在路由懒加载中，以达到更好的分包</p>
<p>为了提高用户体验，可以在组件配置对象加载完成之前给用户显示一些提示信息</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> routes = [</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/&quot;</span>, <span class="attr">component</span>: <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;组件开始加载&quot;</span>); </span><br><span class="line">    <span class="keyword">const</span> <span class="title class_">HomeComp</span> = <span class="keyword">await</span> <span class="keyword">import</span>(<span class="string">&quot;./Views/Home.vue&quot;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;组件加载完毕&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">HomeComp</span>;</span><br><span class="line">  &#125; &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>推荐使用<a target="_blank" rel="noopener" href="https://github.com/rstacruz/nprogress">NProgress</a>展现一个进度条</p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/09/01/NzaWb31teHk5UuX.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/09/01/NzaWb31teHk5UuX.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">拾贰</div><div class="post-copyright__author_desc">得失从缘,心无增减</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://example.com/2024/10/29/Vue%E9%A1%B9%E7%9B%AE%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://example.com/2024/10/29/Vue%E9%A1%B9%E7%9B%AE%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/')">个人博客前台</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://s2.loli.net/2023/09/01/q6Stn5jbXVzxHmC.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/09/01/q6Stn5jbXVzxHmC.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://s2.loli.net/2023/09/01/Qa1oSxc3nlEeGOt.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/09/01/Qa1oSxc3nlEeGOt.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://example.com/2024/10/29/Vue%E9%A1%B9%E7%9B%AE%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=个人博客前台&amp;url=http://example.com/2024/10/29/Vue%E9%A1%B9%E7%9B%AE%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/&amp;pic=" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">拾贰</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/Vue2/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>Vue2<span class="tagsPageCount">2</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://s2.loli.net/2023/09/01/NzaWb31teHk5UuX.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/10/24/%E5%B7%A5%E7%A8%8B%E5%8C%96/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">工程化</div></div></a></div><div class="next-post pull-right"><a href="/2024/11/18/Vue%E9%A1%B9%E7%9B%AE%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">个人博客后台</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/2024/11/18/Vue%E9%A1%B9%E7%9B%AE%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86/" title="个人博客后台"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-11-18</div><div class="title">个人博客后台</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/09/01/NzaWb31teHk5UuX.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/zhheo/Sticker-Heo@latest/Sticker-100/滑稽被子.png" alt="status"/></div></div><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">这有关于<b style="color:#fff">拾贰进行项目开发</b>相关的问题和看法，还有<b style="color:#fff">一些其他的知识</b>和<b style="color:#fff">分享</b>。</div><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">相信你可以在这里找到对你有用的<b style="color:#fff">知识</b>和<b style="color:#fff">教程</b>。</div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">拾贰</h1><div class="author-info__desc">得失从缘,心无增减</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/tentwo24" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/2104980654" target="_blank" title="BiliBili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来看我的博客鸭~</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6%E7%9A%84%E7%94%B1%E6%9D%A5"><span class="toc-number">1.</span> <span class="toc-text">一、前端框架的由来</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E7%AC%AC%E4%B8%80%E4%B8%AAvue%E5%BA%94%E7%94%A8"><span class="toc-number">2.</span> <span class="toc-text">二、第一个vue应用</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="toc-number">3.</span> <span class="toc-text">三、核心概念</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%B3%A8%E5%85%A5"><span class="toc-number">3.1.</span> <span class="toc-text">1.注入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E8%99%9A%E6%8B%9FDOM%E6%A0%91"><span class="toc-number">3.2.</span> <span class="toc-text">2.虚拟DOM树</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E6%8C%82%E8%BD%BD"><span class="toc-number">3.3.</span> <span class="toc-text">3.挂载</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%AE%8C%E6%95%B4%E6%B5%81%E7%A8%8B"><span class="toc-number">3.4.</span> <span class="toc-text">4.完整流程</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E7%BB%84%E4%BB%B6"><span class="toc-number">4.</span> <span class="toc-text">四、组件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E7%BB%84%E4%BB%B6%E5%BC%80%E5%8F%91"><span class="toc-number">4.1.</span> <span class="toc-text">1.组件开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%BB%84%E4%BB%B6"><span class="toc-number">4.1.1.</span> <span class="toc-text">创建组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E5%86%8C%E7%BB%84%E4%BB%B6"><span class="toc-number">4.1.2.</span> <span class="toc-text">注册组件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E6%B3%A8%E5%86%8C"><span class="toc-number">4.1.2.1.</span> <span class="toc-text">全局注册</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B1%80%E9%83%A8%E6%B3%A8%E5%86%8C"><span class="toc-number">4.1.2.2.</span> <span class="toc-text">局部注册</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E7%BB%84%E4%BB%B6"><span class="toc-number">4.1.3.</span> <span class="toc-text">应用组件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E7%BB%84%E4%BB%B6%E6%A0%91"><span class="toc-number">4.2.</span> <span class="toc-text">2.组件树</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%90%91%E7%BB%84%E4%BB%B6%E4%BC%A0%E9%80%92%E6%95%B0%E6%8D%AE"><span class="toc-number">4.3.</span> <span class="toc-text">3.向组件传递数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%B7%A5%E7%A8%8B%E7%BB%93%E6%9E%84"><span class="toc-number">4.4.</span> <span class="toc-text">4.工程结构</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E6%90%AD%E5%BB%BA%E5%B7%A5%E7%A8%8B"><span class="toc-number">5.</span> <span class="toc-text">五、搭建工程</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-vue-cli"><span class="toc-number">5.1.</span> <span class="toc-text">1.vue-cli</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-SFC"><span class="toc-number">5.2.</span> <span class="toc-text">2.SFC</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E9%A2%84%E7%BC%96%E8%AF%91"><span class="toc-number">5.3.</span> <span class="toc-text">3.预编译</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7"><span class="toc-number">6.</span> <span class="toc-text">六、计算属性</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E7%BB%84%E4%BB%B6%E4%BA%8B%E4%BB%B6"><span class="toc-number">7.</span> <span class="toc-text">七、组件事件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-pager%E7%BB%84%E4%BB%B6"><span class="toc-number">7.1.</span> <span class="toc-text">1.pager组件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7"><span class="toc-number">7.1.1.</span> <span class="toc-text">属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6"><span class="toc-number">7.1.2.</span> <span class="toc-text">事件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">7.2.</span> <span class="toc-text">2.知识点</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E4%BC%98%E5%8C%96%E5%B7%A5%E7%A8%8B%E7%BB%93%E6%9E%84"><span class="toc-number">8.</span> <span class="toc-text">八、优化工程结构</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E7%BB%84%E4%BB%B6%EF%BC%9F"><span class="toc-number">8.1.</span> <span class="toc-text">1.如何使用组件？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%A6%82%E4%BD%95%E6%B5%8B%E8%AF%95%E7%BB%84%E4%BB%B6%E6%95%88%E6%9E%9C%EF%BC%9F"><span class="toc-number">8.2.</span> <span class="toc-text">2.如何测试组件效果？</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B9%9D%E3%80%81%E7%BB%84%E4%BB%B6%E7%BB%83%E4%B9%A0"><span class="toc-number">9.</span> <span class="toc-text">九、组件练习</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Avatar"><span class="toc-number">9.1.</span> <span class="toc-text">1.Avatar</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7-1"><span class="toc-number">9.1.1.</span> <span class="toc-text">属性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Icon"><span class="toc-number">9.2.</span> <span class="toc-text">2.Icon</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7-2"><span class="toc-number">9.2.1.</span> <span class="toc-text">属性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-Pager"><span class="toc-number">9.3.</span> <span class="toc-text">3.Pager</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7-3"><span class="toc-number">9.3.1.</span> <span class="toc-text">属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6-1"><span class="toc-number">9.3.2.</span> <span class="toc-text">事件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-Empty"><span class="toc-number">9.4.</span> <span class="toc-text">4.Empty</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7-4"><span class="toc-number">9.4.1.</span> <span class="toc-text">属性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-ImageLoader"><span class="toc-number">9.5.</span> <span class="toc-text">5.ImageLoader</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7-5"><span class="toc-number">9.5.1.</span> <span class="toc-text">属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6-2"><span class="toc-number">9.5.2.</span> <span class="toc-text">事件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B"><span class="toc-number">9.5.3.</span> <span class="toc-text">示例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-Contact"><span class="toc-number">9.6.</span> <span class="toc-text">6.Contact</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-Menu"><span class="toc-number">9.7.</span> <span class="toc-text">7.Menu</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-SiteAside"><span class="toc-number">9.8.</span> <span class="toc-text">8.SiteAside</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E3%80%81%E6%8F%92%E6%A7%BD"><span class="toc-number">10.</span> <span class="toc-text">十、插槽</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%8F%92%E6%A7%BD%E7%9A%84%E7%AE%80%E5%8D%95%E7%94%A8%E6%B3%95"><span class="toc-number">10.1.</span> <span class="toc-text">1.插槽的简单用法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%85%B7%E5%90%8D%E6%8F%92%E6%A7%BD"><span class="toc-number">10.2.</span> <span class="toc-text">2.具名插槽</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%B8%80%E3%80%81%E8%B7%AF%E7%94%B1"><span class="toc-number">11.</span> <span class="toc-text">十一、路由</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E8%B7%AF%E7%94%B1%E6%8F%92%E4%BB%B6"><span class="toc-number">11.1.</span> <span class="toc-text">1.路由插件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">11.2.</span> <span class="toc-text">2.基本使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E8%B7%AF%E7%94%B1%E6%A8%A1%E5%BC%8F"><span class="toc-number">11.3.</span> <span class="toc-text">3.路由模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%AF%BC%E8%88%AA"><span class="toc-number">11.4.</span> <span class="toc-text">4.导航</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BF%80%E6%B4%BB%E7%8A%B6%E6%80%81"><span class="toc-number">11.4.1.</span> <span class="toc-text">激活状态</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%91%BD%E5%90%8D%E8%B7%AF%E7%94%B1"><span class="toc-number">11.5.</span> <span class="toc-text">5.命名路由</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%BA%8C%E3%80%81%E5%BC%B9%E5%87%BA%E6%B6%88%E6%81%AF%E2%96%B2"><span class="toc-number">12.</span> <span class="toc-text">十二、弹出消息▲</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E4%BD%BF%E7%94%A8css-module"><span class="toc-number">12.1.</span> <span class="toc-text">1.使用css module</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%BE%97%E5%88%B0%E7%BB%84%E4%BB%B6%E6%B8%B2%E6%9F%93%E7%9A%84Dom"><span class="toc-number">12.2.</span> <span class="toc-text">2.得到组件渲染的Dom</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E6%89%A9%E5%B1%95vue%E5%AE%9E%E4%BE%8B"><span class="toc-number">12.3.</span> <span class="toc-text">3.扩展vue实例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-ref"><span class="toc-number">12.4.</span> <span class="toc-text">4.ref</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81%E5%85%A8%E5%B1%80%E9%80%9A%E7%94%A8showMessage"><span class="toc-number">12.5.</span> <span class="toc-text">5、全局通用showMessage</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%B8%89%E3%80%81%E8%8E%B7%E5%8F%96%E8%BF%9C%E7%A8%8B%E6%95%B0%E6%8D%AE"><span class="toc-number">13.</span> <span class="toc-text">十三、获取远程数据</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E8%BF%9C%E7%A8%8B%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E7%9A%84%E6%84%8F%E4%B9%89"><span class="toc-number">13.1.</span> <span class="toc-text">1.远程获取数据的意义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%9C%89%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98"><span class="toc-number">13.2.</span> <span class="toc-text">2.开发环境有跨域问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E6%B2%A1%E6%9C%89%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98"><span class="toc-number">13.3.</span> <span class="toc-text">3.生产环境没有跨域问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E8%A7%A3%E5%86%B3%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98"><span class="toc-number">13.4.</span> <span class="toc-text">4.解决开发环境的跨域问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81Mock%E6%95%B0%E6%8D%AE"><span class="toc-number">13.5.</span> <span class="toc-text">5.为什么要Mock数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E8%AF%B7%E6%B1%82%E6%8B%A6%E6%88%AA"><span class="toc-number">13.6.</span> <span class="toc-text">6.请求拦截</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E5%9B%9B%E3%80%81%E7%BB%84%E4%BB%B6%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">14.</span> <span class="toc-text">十四、组件的生命周期</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E7%BB%84%E4%BB%B6%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">14.1.</span> <span class="toc-text">1.组件生命周期</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%B8%B8%E8%A7%81%E5%BA%94%E7%94%A8"><span class="toc-number">14.2.</span> <span class="toc-text">2.常见应用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A0%E8%BD%BD%E8%BF%9C%E7%A8%8B%E6%95%B0%E6%8D%AE"><span class="toc-number">14.2.1.</span> <span class="toc-text">加载远程数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B4%E6%8E%A5%E6%93%8D%E4%BD%9CDOM"><span class="toc-number">14.2.2.</span> <span class="toc-text">直接操作DOM</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E5%92%8C%E6%B8%85%E9%99%A4%E8%AE%A1%E6%97%B6%E5%99%A8"><span class="toc-number">14.2.3.</span> <span class="toc-text">启动和清除计时器</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%BA%94%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4"><span class="toc-number">15.</span> <span class="toc-text">十五、自定义指令</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4"><span class="toc-number">15.1.</span> <span class="toc-text">1.定义指令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%AE%9A%E4%B9%89"><span class="toc-number">15.1.1.</span> <span class="toc-text">全局定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%80%E9%83%A8%E5%AE%9A%E4%B9%89"><span class="toc-number">15.1.2.</span> <span class="toc-text">局部定义</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%8C%87%E4%BB%A4%E9%85%8D%E7%BD%AE%E5%AF%B9%E8%B1%A1"><span class="toc-number">15.2.</span> <span class="toc-text">2.指令配置对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#bingding-%E5%AF%B9%E8%B1%A1"><span class="toc-number">15.2.1.</span> <span class="toc-text">bingding 对象</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E9%85%8D%E7%BD%AE%E7%AE%80%E5%8C%96"><span class="toc-number">15.3.</span> <span class="toc-text">3.配置简化</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E5%85%AD%E3%80%81%E7%BB%84%E4%BB%B6%E6%B7%B7%E5%85%A5"><span class="toc-number">16.</span> <span class="toc-text">十六、组件混入</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%B8%83%E3%80%81%E7%BB%84%E4%BB%B6%E9%80%92%E5%BD%92"><span class="toc-number">17.</span> <span class="toc-text">十七、组件递归</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E5%85%AB%E3%80%81%E6%96%87%E7%AB%A0%E5%88%97%E8%A1%A8%E9%A1%B5%E9%80%BB%E8%BE%91"><span class="toc-number">18.</span> <span class="toc-text">十八、文章列表页逻辑</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E8%B7%AF%E7%94%B1%E8%B7%B3%E8%BD%AC%E9%80%BB%E8%BE%91"><span class="toc-number">18.1.</span> <span class="toc-text">1.路由跳转逻辑</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E7%BB%84%E4%BB%B6%E9%80%BB%E8%BE%91"><span class="toc-number">18.2.</span> <span class="toc-text">2.组件逻辑</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#BlogList"><span class="toc-number">18.2.1.</span> <span class="toc-text">BlogList</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#BlogCategory"><span class="toc-number">18.2.2.</span> <span class="toc-text">BlogCategory</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E7%9F%A5%E8%AF%86"><span class="toc-number">18.3.</span> <span class="toc-text">3.知识</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1"><span class="toc-number">18.3.1.</span> <span class="toc-text">动态路由</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E7%9A%84%E5%AF%BC%E8%88%AA"><span class="toc-number">18.3.1.1.</span> <span class="toc-text">动态路由的导航</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E7%A8%8B%E5%BC%8F%E5%AF%BC%E8%88%AA"><span class="toc-number">18.3.2.</span> <span class="toc-text">编程式导航</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#watch"><span class="toc-number">18.3.3.</span> <span class="toc-text">watch</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%B9%9D%E3%80%81%E6%96%87%E7%AB%A0%E8%AF%A6%E6%83%85%E9%A1%B5"><span class="toc-number">19.</span> <span class="toc-text">十九、文章详情页</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%96%87%E7%AB%A0%E6%95%B0%E6%8D%AE%E9%80%BB%E8%BE%91"><span class="toc-number">19.1.</span> <span class="toc-text">1.文章数据逻辑</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E7%BB%84%E4%BB%B6%E9%80%BB%E8%BE%91-1"><span class="toc-number">19.2.</span> <span class="toc-text">2.组件逻辑</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#BlogDetail"><span class="toc-number">19.2.1.</span> <span class="toc-text">BlogDetail</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#BlogTOC"><span class="toc-number">19.2.2.</span> <span class="toc-text">BlogTOC</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#BlogComment"><span class="toc-number">19.2.3.</span> <span class="toc-text">BlogComment</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E5%8D%81%E3%80%81-listeners%E5%92%8Cv-model"><span class="toc-number">20.</span> <span class="toc-text">二十、$listeners和v-model</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="toc-number">20.1.</span> <span class="toc-text">事件修饰符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#listeners"><span class="toc-number">20.2.</span> <span class="toc-text">$listeners</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#v-model"><span class="toc-number">20.3.</span> <span class="toc-text">v-model</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#v-on"><span class="toc-number">20.4.</span> <span class="toc-text">v-on</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E5%8D%81%E4%B8%80%E3%80%81%E4%BA%8B%E4%BB%B6%E6%80%BB%E7%BA%BF"><span class="toc-number">21.</span> <span class="toc-text">二十一、事件总线</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E5%8D%81%E4%BA%8C%E3%80%81%E5%9B%BE%E7%89%87%E6%87%92%E5%8A%A0%E8%BD%BD"><span class="toc-number">22.</span> <span class="toc-text">二十二、图片懒加载</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E5%8D%81%E4%B8%89%E3%80%81%E6%95%B0%E6%8D%AE%E5%85%B1%E4%BA%AB%E4%B9%8BVuex"><span class="toc-number">23.</span> <span class="toc-text">二十三、数据共享之Vuex</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA%E4%BB%93%E5%BA%93"><span class="toc-number">23.1.</span> <span class="toc-text">1.创建仓库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%95%B0%E6%8D%AE%E7%9A%84%E5%8F%98%E6%9B%B4"><span class="toc-number">23.2.</span> <span class="toc-text">2.数据的变更</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%BC%82%E6%AD%A5%E5%A4%84%E7%90%86"><span class="toc-number">23.3.</span> <span class="toc-text">3.异步处理</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E5%8D%81%E5%9B%9B%E3%80%81%E7%AE%80%E6%98%93%E7%99%BB%E5%BD%95"><span class="toc-number">24.</span> <span class="toc-text">二十四、简易登录</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E7%94%A8%E6%88%B7%E6%A8%A1%E5%9D%97%E9%80%BB%E8%BE%91%E7%A4%BA%E6%84%8F%E5%9B%BE"><span class="toc-number">24.1.</span> <span class="toc-text">1.用户模块逻辑示意图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">24.2.</span> <span class="toc-text">2.参考资料</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#vue"><span class="toc-number">24.2.1.</span> <span class="toc-text">vue</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vuex"><span class="toc-number">24.2.2.</span> <span class="toc-text">vuex</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#router"><span class="toc-number">24.2.3.</span> <span class="toc-text">router</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-Demo"><span class="toc-number">24.3.</span> <span class="toc-text">3.Demo</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E8%B7%AF%E7%94%B1%E9%89%B4%E6%9D%83"><span class="toc-number">24.4.</span> <span class="toc-text">4.路由鉴权</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E5%8D%81%E4%BA%94%E3%80%81%E6%89%93%E5%8C%85%E7%BB%93%E6%9E%9C%E5%88%86%E6%9E%90"><span class="toc-number">25.</span> <span class="toc-text">二十五、打包结果分析</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%88%86%E6%9E%90%E6%89%93%E5%8C%85%E7%BB%93%E6%9E%9C"><span class="toc-number">25.1.</span> <span class="toc-text">1.分析打包结果</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E4%BC%98%E5%8C%96%E5%85%AC%E5%85%B1%E5%BA%93%E6%89%93%E5%8C%85%E4%BD%93%E7%A7%AF"><span class="toc-number">25.2.</span> <span class="toc-text">2.优化公共库打包体积</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8CDN"><span class="toc-number">25.2.1.</span> <span class="toc-text">使用CDN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E7%94%A8%E7%8E%B0%E4%BB%A3%E6%A8%A1%E5%BC%8F"><span class="toc-number">25.2.2.</span> <span class="toc-text">启用现代模式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E4%BC%98%E5%8C%96%E9%A1%B9%E7%9B%AE%E5%8C%85%E4%BD%93%E7%A7%AF"><span class="toc-number">25.3.</span> <span class="toc-text">3.优化项目包体积</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E5%88%86%E5%8C%85"><span class="toc-number">25.3.1.</span> <span class="toc-text">页面分包</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E4%BC%98%E5%8C%96%E9%A6%96%E5%B1%8F%E5%93%8D%E5%BA%94"><span class="toc-number">25.4.</span> <span class="toc-text">4.优化首屏响应</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E5%8D%81%E5%85%AD%E3%80%81%E5%BC%82%E6%AD%A5%E7%BB%84%E4%BB%B6"><span class="toc-number">26.</span> <span class="toc-text">二十六、异步组件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%BC%82%E6%AD%A5%E7%BB%84%E4%BB%B6"><span class="toc-number">26.1.</span> <span class="toc-text">1.异步组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%BA%94%E7%94%A8"><span class="toc-number">26.2.</span> <span class="toc-text">2.应用</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/11/18/Vue%E9%A1%B9%E7%9B%AE%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86/" title="个人博客后台">个人博客后台</a><time datetime="2024-11-18T06:37:03.534Z" title="发表于 2024-11-18 14:37:03">2024-11-18</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/10/29/Vue%E9%A1%B9%E7%9B%AE%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/" title="个人博客前台">个人博客前台</a><time datetime="2024-10-29T03:19:35.564Z" title="发表于 2024-10-29 11:19:35">2024-10-29</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/10/24/%E5%B7%A5%E7%A8%8B%E5%8C%96/" title="工程化">工程化</a><time datetime="2024-10-24T05:46:52.569Z" title="发表于 2024-10-24 13:46:52">2024-10-24</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/10/24/%E5%B8%B8%E7%94%A8%E7%AC%AC%E4%B8%89%E6%96%B9%E5%B7%A5%E5%85%B7%E5%BA%93/" title="常用第三方工具库">常用第三方工具库</a><time datetime="2024-10-24T03:22:29.777Z" title="发表于 2024-10-24 11:22:29">2024-10-24</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/10/24/git%E6%96%87%E6%A1%A3/" title="git文档">git文档</a><time datetime="2024-10-24T01:16:22.779Z" title="发表于 2024-10-24 09:16:22">2024-10-24</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2024 By <a class="footer-bar-link" href="/" title="拾贰" target="_blank">拾贰</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">20</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">10</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">3</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/HTML-CSS/" style="font-size: 0.88rem;">HTML+CSS<sup>4</sup></a><a href="/tags/JavaScript/" style="font-size: 0.88rem;">JavaScript<sup>4</sup></a><a href="/tags/Uniapp/" style="font-size: 0.88rem;">Uniapp<sup>2</sup></a><a href="/tags/Vue/" style="font-size: 0.88rem;">Vue<sup>2</sup></a><a href="/tags/Vue2/" style="font-size: 0.88rem;">Vue2<sup>2</sup></a><a href="/tags/Webpack/" style="font-size: 0.88rem;">Webpack<sup>2</sup></a><a href="/tags/git/" style="font-size: 0.88rem;">git<sup>1</sup></a><a href="/tags/%E5%B7%A5%E5%85%B7%E5%BA%93/" style="font-size: 0.88rem;">工具库<sup>1</sup></a><a href="/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96/" style="font-size: 0.88rem;">工程化<sup>1</sup></a><a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 0.88rem;">网络<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2021 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.6.12",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 拾贰 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>